{"version":3,"sources":["pages/InteractiveCode.tsx","pages/CodeGATutorial.ts","pages/CodePGATutorial.ts","pages/InteractiveCode.module.css","ga/viz2d.tsx","ga/ga_zpp.ts","pages/TutorialIndex.tsx","pages/Motivation.tsx","pages/GATutorial.tsx","pages/PGATutorial.tsx","App.tsx","ga/ga_pp.ts","ga/ga_ppp.ts","pages/PGAGeometryTutorial.tsx","serviceWorker.ts","index.tsx"],"names":["formatObject","obj","toString","JSON","stringify","InteractiveCode","props","sourceCode","editorStyle","hideOutput","withVisualizer","visualizerStyle","outputStyle","style","useState","code","setCode","runResult","setRunResult","run","useCallback","oldLog","console","log","newRunResults","message","optionalParams","push","undefined","map","join","codeToRun","renderTarget","visualizerRef","current","id","eval","e","uniqueId","useMemo","Math","random","slice","useRef","className","styles","position","width","border","background","color","right","top","fontSize","zIndex","onClick","display","flexDirection","alignContent","flexWrap","height","mode","theme","value","onChange","showPrintMargin","ref","scene","readOnly","codeRenderPoint","codeSquareBasisVectors","codeExteriorProduct","codeAntiCommute","codeSquareBivector","codeRotate2DOrientation","codeRotate2D","codeGeneralRotor2D","codeGeneralRotor3D","codeReversionIdentity","pgaPoints","translators","motors","motorsBox","motorBlendingMotivation","motorBlending","module","exports","pointCoordinates","a","magInv","e12","e02","e01","PointElementPGA2D","point","radius","fill","label","trailCount","trailStroke","x","y","trail","setTrail","trailPolyPoints","flat","updateTrail","length","newTrail","useEffect","pga","stroke","strokeWidth","points","cx","cy","r","dominantBaseline","fontWeight","textAnchor","LineElementPGA2D","line","lineCoords","abs","e2","e1","e0","x1","y1","x2","y2","SVGGrid","rows","cols","i","getThickness","index","key","toFixed","SceneView","viewBox","preserveAspectRatio","transform","lines","l","p","infos","info","text","add","b","scalar","e012","sub","dual","geometricProduct","resultScalar","scalar_0","scalar_1","scalar_2","scalar_3","resultE0","e0_0","e0_1","e0_2","e0_3","e0_4","e0_5","e0_6","e0_7","resultE1","e1_0","e1_1","e1_2","e1_3","resultE2","e2_0","e2_1","e2_2","e2_3","resultE01","e01_0","e01_1","e01_2","e01_3","e01_4","e01_5","e01_6","e01_7","resultE02","e02_0","e02_1","e02_2","e02_3","e02_4","e02_5","e02_6","e02_7","resultE12","e12_0","e12_1","e12_2","e12_3","resultE012","e012_0","e012_1","e012_2","e012_3","e012_4","e012_5","e012_6","e012_7","innerProduct","exteriorProduct","multiply","div","reversion","repr","digits","result","regressiveProduct","sandwichProduct","commutatorProduct","exponential","s","rootS","sign","sqrt","cos","sin","cosh","sinh","TutorialIndex","to","Motivation","href","GATutorial","cnt","PGATutorial","breadcrumbPathToName","pathToBreadcrumbs","path","pathNames","pathUrls","cleanedPath","substr","pathSplit","split","pathElement","splice","name","url","NotFound","TutorialSite","location","useLocation","breadcrumbs","pathname","c","reduce","exact","App","wnd","window","ga","ga3d","viz","renderScene","ReactDOM","render","scalar_4","scalar_5","scalar_6","scalar_7","e1_4","e1_5","e1_6","e1_7","e2_4","e2_5","e2_6","e2_7","e12_4","e12_5","e12_6","e12_7","PGAGeometryTutorial","Boolean","hostname","match","getApp","StrictMode","rootElement","document","getElementById","hasChildNodes","hydrate","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.23c4be23.chunk.js","sourcesContent":["/* eslint-disable no-eval */\r\nimport React, { useState, useCallback, useRef, useMemo } from \"react\"\r\nimport styles from \"./InteractiveCode.module.css\"\r\nimport AceEditor from \"react-ace\"\r\nimport \"brace/mode/javascript\"\r\nimport \"brace/theme/monokai\"\r\nimport { SceneView } from \"../ga/viz2d\"\r\n\r\n\r\nexport type InteractiveCodeProps = {\r\n    style?: React.CSSProperties\r\n\r\n    sourceCode: string\r\n    editorStyle?: React.CSSProperties\r\n\r\n    hideOutput?: boolean\r\n    outputStyle?: React.CSSProperties\r\n\r\n    withVisualizer?: boolean\r\n    visualizerStyle?: React.CSSProperties\r\n}\r\n\r\nconst formatObject = (obj: any) => {\r\n    return typeof obj === \"string\" ?\r\n        obj : (\r\n            typeof obj === \"number\" ?\r\n                obj.toString() :\r\n                JSON.stringify(obj, null, 4)\r\n        )\r\n}\r\n\r\nexport function InteractiveCode(props: InteractiveCodeProps) {\r\n    const {\r\n        sourceCode, editorStyle, hideOutput, withVisualizer, visualizerStyle,\r\n        outputStyle, style\r\n    } = props\r\n\r\n    // Store the edited code\r\n    const [code, setCode] = useState(sourceCode)\r\n\r\n    // Store the result of runs\r\n    const [runResult, setRunResult] = useState(\"Press run\")\r\n\r\n    // Run the code.\r\n    const run = useCallback(() => {\r\n        const oldLog = console.log\r\n\r\n        const newRunResults: string[] = []\r\n\r\n        console.log = (message?: any, ...optionalParams: any[]) => {\r\n            newRunResults.push(\r\n                (message !== undefined ? formatObject(message) + \" \" : \"\") +\r\n                optionalParams.map(formatObject).join(\" \")\r\n            )\r\n            oldLog(message, ...optionalParams)\r\n        }\r\n\r\n        let codeToRun = code;\r\n        const renderTarget = withVisualizer && visualizerRef.current\r\n\r\n        // Add helpers when using visualizer\r\n        if (renderTarget) {\r\n            codeToRun = `\r\n                var points = [];\r\n                var lines = [];\r\n                var infos = [];\r\n                var renderPointPGA = (p, color) => points.push({point: p, radius: 4, fill: color});\r\n                var renderLinePGA = (l, color) => lines.push({line: l, width: 2, stroke: color});\r\n                var renderPointGA = (p, color) => renderPointPGA({e02: -p.e0, e01: p.e1, e12: 1}, color);\r\n                var renderInfo = (info, color) => infos.push({text: info, fontSize: 4, color: color});\r\n                var renderBoxPGA = (m, color, h) => {\r\n                    h = h || 3\r\n                    var corners = [\r\n                        {\r\n                            e01: -h,\r\n                            e02: -h,\r\n                            e12: 1\r\n                        },\r\n                        {\r\n                            e01: h,\r\n                            e02: -h,\r\n                            e12: 1\r\n                        },\r\n                        {\r\n                            e01: h,\r\n                            e02: h,\r\n                            e12: 1\r\n                        },\r\n                        {\r\n                            e01: -h,\r\n                            e02: h,\r\n                            e12: 1\r\n                        }\r\n                    ];\r\n\r\n                    for (var cornerIndex = 0; cornerIndex < corners.length; cornerIndex++) {\r\n                        points.push({point: pga.sandwichProduct(corners[cornerIndex], m), radius: 2, fill: color});\r\n                    }\r\n                };\r\n            ` + codeToRun + `\r\n                renderScene({ points: points, lines: lines, infos: infos }, document.getElementById(\"${renderTarget.id}\"));\r\n            `\r\n        }\r\n\r\n        // Declare log() so we can write shorter code\r\n        codeToRun = \"var log = console.log;\" + codeToRun\r\n\r\n        try {\r\n            eval(codeToRun)\r\n            setRunResult(newRunResults.join(\"\\n\"))\r\n        } catch (e) {\r\n            setRunResult(e.toString())\r\n        }\r\n\r\n        console.log = oldLog\r\n    }, [code, withVisualizer])\r\n\r\n    // Unique id so we can refer to the div element that contains the \r\n    // svg render target later if we use a visualizer.\r\n    const uniqueId = useMemo(() => {\r\n        return (Math.random().toString(36) + \"00000000000000000\").slice(2, 18)\r\n    }, [])\r\n\r\n    const visualizerRef = useRef<HTMLDivElement>(null)\r\n\r\n    return (\r\n        <div className={styles[\"interactive-code\"]} style={style}>\r\n            <div style={{ position: \"relative\", width: \"100%\" }}>\r\n                <button style={{ border: 0, background: \"#505050\", color: \"#FFFFFF\", position: \"absolute\", right: 10, top: 10, fontSize: 24, zIndex: 10 }} onClick={run}>Run</button>\r\n            </div>\r\n            <div style={{ display: \"flex\", flexDirection: \"column\", alignContent: \"stretch\" }}>\r\n                <div style={{ display: \"flex\", flexDirection: \"row\", alignContent: \"stretch\", flexWrap: \"wrap\" }}>\r\n                    <AceEditor className={withVisualizer ? styles[\"interactive-code-editor-with-viz\"] : styles[\"interactive-code-editor-without-viz\"]}\r\n                        style={{ ...{ width: undefined, height: undefined }, ...editorStyle }}\r\n                        mode=\"javascript\" theme=\"monokai\" value={code} onChange={e => setCode(e)}\r\n                        showPrintMargin={false}\r\n                    />\r\n\r\n                    {withVisualizer &&\r\n                        <div id={`#${uniqueId}`} ref={visualizerRef} className={styles[\"interactive-code-viz\"]} style={visualizerStyle}>\r\n                            <SceneView scene={{}} />\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                {!hideOutput &&\r\n                    <AceEditor className={styles[\"interactive-code-output\"]} style={{ ...{ width: undefined, height: undefined }, ...outputStyle }}\r\n                        mode=\"javascript\" theme=\"monokai\" value={runResult} readOnly={true}\r\n                        showPrintMargin={false}\r\n                    />\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","export const codeRenderPoint = `// Render point at x=10, y=-60\r\nrenderPointGA({ e0: 10, e1: -60 })\r\n\r\n// Render point at x=-50, y=80\r\nrenderPointGA({ e0: -50, e1: 80 }, \"red\")`\r\n\r\nexport const codeSquareBasisVectors = `var exSquared = ga.geometricProduct({ e0: 1 }, { e0: 1 })\r\nvar eySquared = ga.geometricProduct({ e1: 1 }, { e1: 1 })\r\n\r\nlog(\"e0^2:\", exSquared)\r\nlog(\"e1^2:\", eySquared)`\r\n\r\nexport const codeExteriorProduct = `var exEy = ga.geometricProduct({ e0: 1 }, { e1: 1 })\r\nvar eyEx = ga.geometricProduct({ e1: 1 }, { e0: 1 })\r\n\r\nlog(\"e0 e1:\", exEy)\r\nlog(\"e1 e0:\", eyEx)`\r\n\r\nexport const codeAntiCommute = `var exEy = ga.geometricProduct({ e0: 1 }, { e1: 1 })\r\nvar exEyEx = ga.geometricProduct(exEy, { e0: 1 })\r\n\r\nlog(\"e0 e1 e0:\", exEyEx)`\r\n\r\nexport const codeSquareBivector = `var exEy = { e01: 1 }\r\nvar exEySquared = ga.geometricProduct(exEy, exEy)\r\n\r\nlog(\"e01^2\", exEySquared)`\r\n\r\nexport const codeRotate2DOrientation = `var eXy = { e01: 1 }\r\nvar eYx = { e01: -1 } // e_yx = -e_xy\r\n\r\nvar p = { e0: 70, e1: 0 }\r\n\r\nvar a = ga.geometricProduct(p, eXy)\r\nvar b = ga.geometricProduct(p, eYx)\r\n\r\nrenderPointGA(p)\r\nrenderPointGA(a, \"red\")\r\nrenderPointGA(b, \"blue\")\r\n`\r\n\r\nexport const codeRotate2D = `var phi = Math.PI * 3 / 4 // 135\r\n\r\n// e^(phi e_{yx}) = e^(-phi e_{xy})\r\nvar r = ga.exponential({ e01: -phi })\r\n\r\nvar p = { e0: 70, e1: 0 }\r\n\r\n// p rotated by 135 counter-clockwise\r\nvar rotatedP = ga.geometricProduct(r, p)\r\n\r\nrenderPointGA(p)\r\nrenderPointGA(rotatedP, \"red\")\r\nrenderInfo(ga.repr(rotatedP), \"red\")`\r\n\r\nexport const codeGeneralRotor2D = `var phi = Math.PI * 3 / 4 // 135\r\n\r\n// e^(phi/2 e_{yx}) = e^(-phi/2 e_{xy})\r\n// Only half the angle required with sandwich product\r\nvar r = ga.exponential({ e01: -phi / 2 })\r\n\r\nvar p = { e0: 70, e1: 0 }\r\n\r\n// R p ~R (sandwich product)\r\n// p rotated by 135 counter-clockwise\r\nvar rotatedP = ga.geometricProduct(\r\n    r,\r\n    ga.geometricProduct(p, ga.reversion(r)) \r\n)\r\n\r\nrenderPointGA(p)\r\nrenderPointGA(rotatedP, \"red\")\r\nrenderInfo(ga.repr(rotatedP), \"red\")`\r\n\r\nexport const codeGeneralRotor3D = `var phi = Math.PI * 3 / 4 // 135\r\nvar theta = Math.PI / 2 // 90\r\n\r\n// CCW XZ rotation by phi\r\nvar r1 = ga3d.exponential({ e02: -phi / 2 })\r\n\r\n// CCW XY rotation by theta\r\nvar r2 = ga3d.exponential({ e01: -theta / 2 })\r\n\r\n// Compose XY and XZ rotation\r\nvar r = ga3d.geometricProduct(r2, r1)\r\n\r\nvar p = { e0: 70, e1: 0, e2: 0 }\r\n\r\n// p first rotated by phi in XZ, then by theta in XY\r\nvar rotatedP = ga3d.geometricProduct(\r\n    r,\r\n    ga3d.geometricProduct(p, ga3d.reversion(r))\r\n)\r\n\r\nlog(\"Rotated P:\", rotatedP)`\r\n\r\nexport const codeReversionIdentity = `var phi = Math.PI * 3 / 4 // 135\r\nvar theta = Math.PI / 2 // 90\r\n\r\nvar r1 = ga3d.exponential({ e02: -phi / 2 })\r\nvar r2 = ga3d.exponential({ e01: -theta / 2 })\r\n\r\n// Compose XY and XZ rotation\r\nvar r = ga3d.geometricProduct(r2, r1)\r\n\r\nvar p = { e0: 70, e1: 0, e2: 0 }\r\n\r\n// (R ~R) p (R ~P)\r\nvar q = ga3d.sandwichProduct(\r\n    p,\r\n    ga3d.geometricProduct(r, ga3d.reversion(r))\r\n)\r\n\r\nlog(\"q:\", q)`","export const pgaPoints = `// Render a point at x: 40, y: 60\r\nrenderPointPGA({\r\n    e02: -40, // -e_0y = e_y0\r\n    e01: 60,\r\n    e12: 1\r\n}, \"lime\")\r\n\r\n// Render a point at x: 20, y: 30\r\n// Point coordinates divided by e_xy part\r\nrenderPointPGA({\r\n    e02: -40,\r\n    e01: 60,\r\n    e12: 2\r\n}, \"red\")`\r\n\r\nexport const translators = `var p = {\r\n    e02: -40,\r\n    e01: 60,\r\n    e12: 1\r\n}\r\n\r\n// Translator that moves by 80 along X.\r\n// Same as exp(d/2 e_0y).\r\nvar t = {\r\n    scalar: 1,\r\n    e01: 40\r\n}\r\n\r\nvar q = pga.sandwichProduct(p, t)\r\n\r\nrenderPointPGA(p, \"lime\")\r\nrenderPointPGA(q, \"red\")`\r\n\r\nexport const motors = `var p = {\r\n    e02: -40,\r\n    e01: 60,\r\n    e12: 1\r\n}\r\n\r\nvar t = pga.exponential({\r\n    e01: 40\r\n})\r\n\r\nvar r = pga.exponential({\r\n    // 90/2; e_yx = -e_xy\r\n    e12: -Math.PI / 4\r\n})\r\n\r\nvar m = pga.geometricProduct(r, t)\r\n\r\nvar q = pga.sandwichProduct(p, m)\r\n\r\nrenderPointPGA(p, \"lime\")\r\nrenderPointPGA(q, \"red\")`\r\n\r\nexport const motorsBox = `var t = pga.exponential({\r\n    e01: 40\r\n})\r\n\r\nvar r = pga.exponential({\r\n    e12: -Math.PI / 8\r\n})\r\n\r\n// Translate -80 in X, then rotate 45 CCW\r\nvar m = pga.geometricProduct(r, t)\r\n\r\n// Identity motor to visualize the initial box\r\n// at the origin\r\nvar identity = { scalar: 1 }\r\n\r\nrenderBoxPGA(identity, \"lime\")\r\nrenderBoxPGA(m, \"red\")`\r\n\r\nexport const motorBlendingMotivation = `var a1 = {\r\n    e01: 40,\r\n    e02: 30\r\n}\r\n\r\nvar a2 = {\r\n    e01: -40,\r\n    e02: -10,\r\n    e12: -Math.PI / 6\r\n}\r\n\r\nvar m1 = pga.exponential(a1)\r\nvar m2 = pga.exponential(a2)\r\n\r\nrenderBoxPGA(m1, \"black\")\r\nrenderBoxPGA(m2, \"red\")`\r\n\r\nexport const motorBlending = `var a1 = {\r\n    e01: 40,\r\n    e02: 30\r\n}\r\n\r\nvar a2 = {\r\n    e01: -40,\r\n    e02: -10,\r\n    e12: -Math.PI / 6\r\n}\r\n\r\nfor (var alpha = 0; alpha <= 1; alpha += 0.1) {\r\n    var m = pga.exponential(pga.add(\r\n        pga.geometricProduct(a1, { scalar: 1 - alpha }),\r\n        pga.geometricProduct(a2, { scalar: alpha })\r\n    ))\r\n    var c = \"rgb(\" + (255 * alpha).toString() + \", 0, 0)\"\r\n    renderBoxPGA(m, c)\r\n}`\r\n\r\nexport const visualizerExample = `// Render a point at x: 50, y: 10\r\nrenderPointPGA({\r\n    e02: -50,\r\n    e01: 10,\r\n    e12: 1\r\n}, \"lime\")\r\n\r\n// Render the line 2x + 1y - 10 = 0\r\nrenderLinePGA({\r\n    e0: -10,\r\n    e1: 2,\r\n    e2: 1\r\n}, \"orange\")`","// extracted by mini-css-extract-plugin\nmodule.exports = {\"interactive-code\":\"InteractiveCode_interactive-code__1W_Ca\",\"interactive-code-editor-with-viz\":\"InteractiveCode_interactive-code-editor-with-viz__3vc2f\",\"interactive-code-editor-without-viz\":\"InteractiveCode_interactive-code-editor-without-viz__23QwE\",\"interactive-code-viz\":\"InteractiveCode_interactive-code-viz__1atqK\",\"interactive-code-output\":\"InteractiveCode_interactive-code-output__2M2TB\"};","import React, { useCallback, useState, useEffect, useMemo } from \"react\"\r\nimport * as pga from \"./ga_zpp\"\r\n\r\n\r\nexport const pointCoordinates = (a: pga.BiVector): [number, number] => {\r\n    const magInv = 1 / a.e12\r\n    return [-a.e02 * magInv, a.e01 * magInv]\r\n}\r\n\r\nexport type PointElementPGA2DProps = {\r\n    point: pga.BiVector\r\n    radius?: number\r\n    fill?: string\r\n    label?: string\r\n    trailCount?: number\r\n    trailStroke?: string\r\n}\r\n\r\nconst getPolyLinePoints = (points: [number, number][]): string =>\r\n    points.flat().join(\" \")\r\n\r\n\r\nexport function PointElementPGA2D(props: PointElementPGA2DProps) {\r\n    const { point, radius, fill, label, trailCount, trailStroke } = props\r\n\r\n    const x = -point.e02 / point.e12\r\n    const y = point.e01 / point.e12\r\n\r\n    const [trail, setTrail] = useState<[number, number][]>([])\r\n\r\n    const trailPolyPoints = useMemo(() => getPolyLinePoints(trail), [trail])\r\n\r\n    const updateTrail = useCallback(() => {\r\n        if (trailCount) {\r\n            if (trail.length === 0 || (trail[trail.length - 1][0] !== x || trail[trail.length - 1][1] !== y)) {\r\n                let newTrail = [...trail]\r\n                if (newTrail.length > trailCount) {\r\n                    newTrail = newTrail.slice(1)\r\n                }\r\n                newTrail.push([x, y])\r\n                setTrail(newTrail)\r\n            }\r\n        } else {\r\n            setTrail([])\r\n        }\r\n    }, [x, y, trail, trailCount])\r\n\r\n    useEffect(updateTrail, [x, y])\r\n\r\n    return (\r\n        <g>\r\n            <title>{pga.repr(point)}</title>\r\n            {trail.length > 0 &&\r\n                <polyline fill=\"none\" stroke={trailStroke || \"#F37121\"}\r\n                    strokeWidth={0.5 * (radius || 1)}\r\n                    points={trailPolyPoints} />\r\n            }\r\n\r\n            <circle cx={x} cy={-y} r={radius || 1} fill={fill || \"#F37121\"} stroke=\"white\" />\r\n\r\n            {label &&\r\n                <text x={x} y={-y} dominantBaseline=\"middle\"\r\n                    fontWeight=\"800\"\r\n                    textAnchor=\"middle\" fontSize={radius || 1}>\r\n                    {label}\r\n                </text>\r\n            }\r\n        </g>\r\n    )\r\n}\r\n\r\nexport type LineElementPGA2DProps = {\r\n    line: pga.Vector\r\n    width?: number\r\n    stroke?: string\r\n    label?: string\r\n}\r\n\r\nexport function LineElementPGA2D(props: LineElementPGA2DProps) {\r\n    let { line, width, stroke, label } = props\r\n\r\n    const lineCoords = useMemo(() => {\r\n        if (Math.abs(line.e2) > Math.abs(line.e1)) {\r\n            const startX = -100\r\n            const endX = 100\r\n            const startY = -(line.e1 * startX + line.e0) / line.e2\r\n            const endY = -(line.e1 * endX + line.e0) / line.e2\r\n            return [startX, startY, endX, endY]\r\n        } else {\r\n            const startY = -100\r\n            const endY = 100\r\n            const startX = -(line.e2 * startY + line.e0) / line.e1\r\n            const endX = -(line.e2 * endY + line.e0) / line.e1\r\n            return [startX, startY, endX, endY]\r\n        }\r\n    }, [line])\r\n\r\n    return (\r\n        <g>\r\n            <title>{pga.repr(line)}</title>\r\n            <line x1={lineCoords[0]} y1={-lineCoords[1]} x2={lineCoords[2]} y2={-lineCoords[3]}\r\n                strokeWidth={width || 1} stroke={stroke || \"#F37121\"} />\r\n\r\n            {label &&\r\n                <text x={(lineCoords[0] + lineCoords[2]) / 2} y={-0.5 * (lineCoords[1] + lineCoords[3])}\r\n                    dominantBaseline=\"middle\" fontWeight=\"800\"\r\n                    textAnchor=\"middle\" fontSize={1}>\r\n                    {label}\r\n                </text>\r\n            }\r\n        </g>\r\n    )\r\n}\r\n\r\nexport type InfoElementProps = {\r\n    text: string\r\n    fontSize?: number\r\n    color?: string\r\n}\r\n\r\nexport type Scene = {\r\n    points?: PointElementPGA2DProps[]\r\n    lines?: LineElementPGA2DProps[]\r\n    infos?: InfoElementProps[]\r\n}\r\n\r\nexport type SceneViewProps = {\r\n    scene: Scene\r\n    style?: React.CSSProperties\r\n}\r\n\r\nfunction SVGGrid() {\r\n    const rows: number[] = []\r\n    const cols: number[] = []\r\n    for (let i = -10; i <= 10; i++) {\r\n        rows.push(i)\r\n        cols.push(i)\r\n    }\r\n\r\n    const getThickness = useCallback((index: number) => {\r\n        if (index === 0) {\r\n            return 1\r\n        } else if (index % 5 === 0) {\r\n            return 0.5\r\n        }\r\n\r\n        return 0.25\r\n    }, [])\r\n\r\n    return (\r\n        <g>\r\n            <g>\r\n                {cols.map(x =>\r\n                    <g key={x}>\r\n                        <line x1={x * 10} x2={x * 10} y1={100} y2={-100} stroke=\"#CCCCCC\" strokeWidth={getThickness(x)} />\r\n                        {x % 2 === 0 && x !== 0 && (\r\n                            <text x={10 * x} y={-2} fill=\"white\" fontSize={5} textAnchor=\"middle\">\r\n                                {`${(10 * x).toFixed(0)}`}\r\n                            </text>\r\n                        )}\r\n                    </g>\r\n                )}\r\n            </g>\r\n\r\n            <g>\r\n                {rows.map(y =>\r\n                    <g key={y}>\r\n                        <line x1={-100} x2={100} y1={-y * 10} y2={-y * 10} stroke=\"#CCCCCC\" strokeWidth={getThickness(y)} />\r\n                        {(y % 2 === 0) && (\r\n                            <text x={5} y={-(10 * y + 2)} fill=\"white\" fontSize={5} textAnchor=\"middle\">\r\n                                {`${(10 * y).toFixed(0)}`}\r\n                            </text>\r\n                        )}\r\n                    </g>\r\n                )}\r\n            </g>\r\n        </g>\r\n    )\r\n}\r\n\r\nexport function SceneView(props: SceneViewProps) {\r\n    const { scene, style } = props\r\n\r\n    return (\r\n        <svg viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMinYMin slice\" style={style}>\r\n            <rect fill=\"#111D6E\" width=\"100%\" height=\"100%\" />\r\n\r\n            <g transform=\"translate(50, 50) scale(0.5)\">\r\n                <SVGGrid />\r\n\r\n                {scene.lines && scene.lines.map((l, i) =>\r\n                    <LineElementPGA2D {...l} key={i} />\r\n                )}\r\n\r\n                {scene.points && scene.points.map((p, i) =>\r\n                    <PointElementPGA2D {...p} key={i} />\r\n                )}\r\n            </g>\r\n\r\n            {scene.infos && scene.infos.map((info, i) => {\r\n                return (\r\n                    <text key={i} fontWeight=\"100\" x={1} y={6 + i} fontSize={info.fontSize || 1} fill={info.color || \"white\"}>\r\n                        {info.text}\r\n                    </text>\r\n                )\r\n            })}\r\n        </svg>\r\n    )\r\n}","export type BladeScalar = { scalar: number }\r\nexport type BladeE0 = { e0: number }\r\nexport type BladeE1 = { e1: number }\r\nexport type BladeE2 = { e2: number }\r\nexport type BladeE01 = { e01: number }\r\nexport type BladeE02 = { e02: number }\r\nexport type BladeE12 = { e12: number }\r\nexport type BladeE012 = { e012: number }\r\n\r\nexport type Scalar = BladeScalar\r\nexport type Vector = BladeE0 & BladeE1 & BladeE2\r\nexport type BiVector = BladeE01 & BladeE02 & BladeE12\r\nexport type TriVector = BladeE012\r\nexport type PseudoTriVector = BladeScalar\r\nexport type PseudoBiVector = BladeE0 & BladeE1 & BladeE2\r\nexport type PseudoVector = BladeE01 & BladeE02 & BladeE12\r\nexport type PseudoScalar = BladeE012\r\nexport type Even = BladeScalar & BladeE01 & BladeE02 & BladeE12\r\nexport type Odd = BladeE0 & BladeE1 & BladeE2 & BladeE012\r\nexport type MultiVector = BladeScalar & BladeE0 & BladeE1 & BladeE2 & BladeE01 & BladeE02 & BladeE12 & BladeE012\r\n\r\nexport type OptionalMultiVector = {\r\n    scalar?: number\r\n    e0?: number\r\n    e1?: number\r\n    e2?: number\r\n    e01?: number\r\n    e02?: number\r\n    e12?: number\r\n    e012?: number\r\n}\r\n\r\nexport type AddResultType<A, B> = (\r\n    (A extends BladeScalar ? BladeScalar : {}) &\r\n    (B extends BladeScalar ? BladeScalar : {}) &\r\n    (A extends BladeE0 ? BladeE0 : {}) &\r\n    (B extends BladeE0 ? BladeE0 : {}) &\r\n    (A extends BladeE1 ? BladeE1 : {}) &\r\n    (B extends BladeE1 ? BladeE1 : {}) &\r\n    (A extends BladeE2 ? BladeE2 : {}) &\r\n    (B extends BladeE2 ? BladeE2 : {}) &\r\n    (A extends BladeE01 ? BladeE01 : {}) &\r\n    (B extends BladeE01 ? BladeE01 : {}) &\r\n    (A extends BladeE02 ? BladeE02 : {}) &\r\n    (B extends BladeE02 ? BladeE02 : {}) &\r\n    (A extends BladeE12 ? BladeE12 : {}) &\r\n    (B extends BladeE12 ? BladeE12 : {}) &\r\n    (A extends BladeE012 ? BladeE012 : {}) &\r\n    (B extends BladeE012 ? BladeE012 : {})\r\n)\r\n\r\nexport const add = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): AddResultType<A, B> => {\r\n    const result: any = {\r\n        scalar: (a.scalar !== undefined || b.scalar !== undefined) ? (a.scalar || 0) + (b.scalar || 0) : undefined,\r\n        e0: (a.e0 !== undefined || b.e0 !== undefined) ? (a.e0 || 0) + (b.e0 || 0) : undefined,\r\n        e1: (a.e1 !== undefined || b.e1 !== undefined) ? (a.e1 || 0) + (b.e1 || 0) : undefined,\r\n        e2: (a.e2 !== undefined || b.e2 !== undefined) ? (a.e2 || 0) + (b.e2 || 0) : undefined,\r\n        e01: (a.e01 !== undefined || b.e01 !== undefined) ? (a.e01 || 0) + (b.e01 || 0) : undefined,\r\n        e02: (a.e02 !== undefined || b.e02 !== undefined) ? (a.e02 || 0) + (b.e02 || 0) : undefined,\r\n        e12: (a.e12 !== undefined || b.e12 !== undefined) ? (a.e12 || 0) + (b.e12 || 0) : undefined,\r\n        e012: (a.e012 !== undefined || b.e012 !== undefined) ? (a.e012 || 0) + (b.e012 || 0) : undefined,\r\n    }\r\n    return result as AddResultType<A, B>\r\n}\r\n\r\nexport const sub = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): AddResultType<A, B> => {\r\n    const result: any = {\r\n        scalar: (a.scalar !== undefined || b.scalar !== undefined) ? (a.scalar || 0) - (b.scalar || 0) : undefined,\r\n        e0: (a.e0 !== undefined || b.e0 !== undefined) ? (a.e0 || 0) - (b.e0 || 0) : undefined,\r\n        e1: (a.e1 !== undefined || b.e1 !== undefined) ? (a.e1 || 0) - (b.e1 || 0) : undefined,\r\n        e2: (a.e2 !== undefined || b.e2 !== undefined) ? (a.e2 || 0) - (b.e2 || 0) : undefined,\r\n        e01: (a.e01 !== undefined || b.e01 !== undefined) ? (a.e01 || 0) - (b.e01 || 0) : undefined,\r\n        e02: (a.e02 !== undefined || b.e02 !== undefined) ? (a.e02 || 0) - (b.e02 || 0) : undefined,\r\n        e12: (a.e12 !== undefined || b.e12 !== undefined) ? (a.e12 || 0) - (b.e12 || 0) : undefined,\r\n        e012: (a.e012 !== undefined || b.e012 !== undefined) ? (a.e012 || 0) - (b.e012 || 0) : undefined,\r\n    }\r\n    return result as AddResultType<A, B>\r\n}\r\n\r\nexport type DualResultType<A> = (\r\n    (A extends BladeScalar ? BladeE012 : {}) &\r\n    (A extends BladeE0 ? BladeE12 : {}) &\r\n    (A extends BladeE1 ? BladeE02 : {}) &\r\n    (A extends BladeE2 ? BladeE01 : {}) &\r\n    (A extends BladeE01 ? BladeE2 : {}) &\r\n    (A extends BladeE02 ? BladeE1 : {}) &\r\n    (A extends BladeE12 ? BladeE0 : {}) &\r\n    (A extends BladeE012 ? BladeScalar : {})\r\n)\r\n\r\nexport const dual = <A extends OptionalMultiVector>(a: A): DualResultType<A> => {\r\n    const result: any = {\r\n        scalar: a.e012 !== undefined ? 1.0 * a.e012 : undefined,\r\n        e0: a.e12 !== undefined ? 1.0 * a.e12 : undefined,\r\n        e1: a.e02 !== undefined ? -1.0 * a.e02 : undefined,\r\n        e2: a.e01 !== undefined ? 1.0 * a.e01 : undefined,\r\n        e01: a.e2 !== undefined ? 1.0 * a.e2 : undefined,\r\n        e02: a.e1 !== undefined ? -1.0 * a.e1 : undefined,\r\n        e12: a.e0 !== undefined ? 1.0 * a.e0 : undefined,\r\n        e012: a.scalar !== undefined ? 1.0 * a.scalar : undefined,\r\n    }\r\n    return result as DualResultType<A>\r\n}\r\n\r\nexport type GeometricProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE2 ? BladeE2 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {}) &\r\n        (B extends BladeE02 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE12 : {}) &\r\n        (B extends BladeE012 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE0 ? BladeE01 : {}) &\r\n        (B extends BladeE1 ? BladeScalar : {}) &\r\n        (B extends BladeE2 ? BladeE12 : {}) &\r\n        (B extends BladeE01 ? BladeE0 : {}) &\r\n        (B extends BladeE02 ? BladeE012 : {}) &\r\n        (B extends BladeE12 ? BladeE2 : {}) &\r\n        (B extends BladeE012 ? BladeE02 : {})\r\n    ) : {}) &\r\n    (A extends BladeE2 ? (\r\n        (B extends BladeScalar ? BladeE2 : {}) &\r\n        (B extends BladeE0 ? BladeE02 : {}) &\r\n        (B extends BladeE1 ? BladeE12 : {}) &\r\n        (B extends BladeE2 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE012 : {}) &\r\n        (B extends BladeE02 ? BladeE0 : {}) &\r\n        (B extends BladeE12 ? BladeE1 : {}) &\r\n        (B extends BladeE012 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE1 ? BladeE0 : {}) &\r\n        (B extends BladeE2 ? BladeE012 : {}) &\r\n        (B extends BladeE12 ? BladeE02 : {})\r\n    ) : {}) &\r\n    (A extends BladeE02 ? (\r\n        (B extends BladeScalar ? BladeE02 : {}) &\r\n        (B extends BladeE1 ? BladeE012 : {}) &\r\n        (B extends BladeE2 ? BladeE0 : {}) &\r\n        (B extends BladeE12 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE12 ? (\r\n        (B extends BladeScalar ? BladeE12 : {}) &\r\n        (B extends BladeE0 ? BladeE012 : {}) &\r\n        (B extends BladeE1 ? BladeE2 : {}) &\r\n        (B extends BladeE2 ? BladeE1 : {}) &\r\n        (B extends BladeE01 ? BladeE02 : {}) &\r\n        (B extends BladeE02 ? BladeE01 : {}) &\r\n        (B extends BladeE12 ? BladeScalar : {}) &\r\n        (B extends BladeE012 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE012 ? (\r\n        (B extends BladeScalar ? BladeE012 : {}) &\r\n        (B extends BladeE1 ? BladeE02 : {}) &\r\n        (B extends BladeE2 ? BladeE01 : {}) &\r\n        (B extends BladeE12 ? BladeE0 : {})\r\n    ) : {})\r\n\r\nexport const geometricProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): GeometricProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    const scalar_1 = a.e1 !== undefined && b.e1 !== undefined\r\n    const scalar_2 = a.e2 !== undefined && b.e2 !== undefined\r\n    const scalar_3 = a.e12 !== undefined && b.e12 !== undefined\r\n    if (scalar_0 || scalar_1 || scalar_2 || scalar_3) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n        if (scalar_1) resultScalar += 1.0 * (a.e1! * b.e1!)\r\n        if (scalar_2) resultScalar += 1.0 * (a.e2! * b.e2!)\r\n        if (scalar_3) resultScalar += -1.0 * (a.e12! * b.e12!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    const e0_2 = a.e1 !== undefined && b.e01 !== undefined\r\n    const e0_3 = a.e2 !== undefined && b.e02 !== undefined\r\n    const e0_4 = a.e01 !== undefined && b.e1 !== undefined\r\n    const e0_5 = a.e02 !== undefined && b.e2 !== undefined\r\n    const e0_6 = a.e12 !== undefined && b.e012 !== undefined\r\n    const e0_7 = a.e012 !== undefined && b.e12 !== undefined\r\n    if (e0_0 || e0_1 || e0_2 || e0_3 || e0_4 || e0_5 || e0_6 || e0_7) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n        if (e0_2) resultE0 += -1.0 * (a.e1! * b.e01!)\r\n        if (e0_3) resultE0 += -1.0 * (a.e2! * b.e02!)\r\n        if (e0_4) resultE0 += 1.0 * (a.e01! * b.e1!)\r\n        if (e0_5) resultE0 += 1.0 * (a.e02! * b.e2!)\r\n        if (e0_6) resultE0 += -1.0 * (a.e12! * b.e012!)\r\n        if (e0_7) resultE0 += -1.0 * (a.e012! * b.e12!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e1 !== undefined && b.scalar !== undefined\r\n    const e1_2 = a.e2 !== undefined && b.e12 !== undefined\r\n    const e1_3 = a.e12 !== undefined && b.e2 !== undefined\r\n    if (e1_0 || e1_1 || e1_2 || e1_3) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n        if (e1_2) resultE1 += -1.0 * (a.e2! * b.e12!)\r\n        if (e1_3) resultE1 += 1.0 * (a.e12! * b.e2!)\r\n    }\r\n    let resultE2 = undefined\r\n    const e2_0 = a.scalar !== undefined && b.e2 !== undefined\r\n    const e2_1 = a.e1 !== undefined && b.e12 !== undefined\r\n    const e2_2 = a.e2 !== undefined && b.scalar !== undefined\r\n    const e2_3 = a.e12 !== undefined && b.e1 !== undefined\r\n    if (e2_0 || e2_1 || e2_2 || e2_3) {\r\n        resultE2 = 0\r\n        if (e2_0) resultE2 += 1.0 * (a.scalar! * b.e2!)\r\n        if (e2_1) resultE2 += 1.0 * (a.e1! * b.e12!)\r\n        if (e2_2) resultE2 += 1.0 * (a.e2! * b.scalar!)\r\n        if (e2_3) resultE2 += -1.0 * (a.e12! * b.e1!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e0 !== undefined && b.e1 !== undefined\r\n    const e01_2 = a.e1 !== undefined && b.e0 !== undefined\r\n    const e01_3 = a.e2 !== undefined && b.e012 !== undefined\r\n    const e01_4 = a.e01 !== undefined && b.scalar !== undefined\r\n    const e01_5 = a.e02 !== undefined && b.e12 !== undefined\r\n    const e01_6 = a.e12 !== undefined && b.e02 !== undefined\r\n    const e01_7 = a.e012 !== undefined && b.e2 !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3 || e01_4 || e01_5 || e01_6 || e01_7) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e0! * b.e1!)\r\n        if (e01_2) resultE01 += -1.0 * (a.e1! * b.e0!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e2! * b.e012!)\r\n        if (e01_4) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n        if (e01_5) resultE01 += -1.0 * (a.e02! * b.e12!)\r\n        if (e01_6) resultE01 += 1.0 * (a.e12! * b.e02!)\r\n        if (e01_7) resultE01 += 1.0 * (a.e012! * b.e2!)\r\n    }\r\n    let resultE02 = undefined\r\n    const e02_0 = a.scalar !== undefined && b.e02 !== undefined\r\n    const e02_1 = a.e0 !== undefined && b.e2 !== undefined\r\n    const e02_2 = a.e1 !== undefined && b.e012 !== undefined\r\n    const e02_3 = a.e2 !== undefined && b.e0 !== undefined\r\n    const e02_4 = a.e01 !== undefined && b.e12 !== undefined\r\n    const e02_5 = a.e02 !== undefined && b.scalar !== undefined\r\n    const e02_6 = a.e12 !== undefined && b.e01 !== undefined\r\n    const e02_7 = a.e012 !== undefined && b.e1 !== undefined\r\n    if (e02_0 || e02_1 || e02_2 || e02_3 || e02_4 || e02_5 || e02_6 || e02_7) {\r\n        resultE02 = 0\r\n        if (e02_0) resultE02 += 1.0 * (a.scalar! * b.e02!)\r\n        if (e02_1) resultE02 += 1.0 * (a.e0! * b.e2!)\r\n        if (e02_2) resultE02 += -1.0 * (a.e1! * b.e012!)\r\n        if (e02_3) resultE02 += -1.0 * (a.e2! * b.e0!)\r\n        if (e02_4) resultE02 += 1.0 * (a.e01! * b.e12!)\r\n        if (e02_5) resultE02 += 1.0 * (a.e02! * b.scalar!)\r\n        if (e02_6) resultE02 += -1.0 * (a.e12! * b.e01!)\r\n        if (e02_7) resultE02 += -1.0 * (a.e012! * b.e1!)\r\n    }\r\n    let resultE12 = undefined\r\n    const e12_0 = a.scalar !== undefined && b.e12 !== undefined\r\n    const e12_1 = a.e1 !== undefined && b.e2 !== undefined\r\n    const e12_2 = a.e2 !== undefined && b.e1 !== undefined\r\n    const e12_3 = a.e12 !== undefined && b.scalar !== undefined\r\n    if (e12_0 || e12_1 || e12_2 || e12_3) {\r\n        resultE12 = 0\r\n        if (e12_0) resultE12 += 1.0 * (a.scalar! * b.e12!)\r\n        if (e12_1) resultE12 += 1.0 * (a.e1! * b.e2!)\r\n        if (e12_2) resultE12 += -1.0 * (a.e2! * b.e1!)\r\n        if (e12_3) resultE12 += 1.0 * (a.e12! * b.scalar!)\r\n    }\r\n    let resultE012 = undefined\r\n    const e012_0 = a.scalar !== undefined && b.e012 !== undefined\r\n    const e012_1 = a.e0 !== undefined && b.e12 !== undefined\r\n    const e012_2 = a.e1 !== undefined && b.e02 !== undefined\r\n    const e012_3 = a.e2 !== undefined && b.e01 !== undefined\r\n    const e012_4 = a.e01 !== undefined && b.e2 !== undefined\r\n    const e012_5 = a.e02 !== undefined && b.e1 !== undefined\r\n    const e012_6 = a.e12 !== undefined && b.e0 !== undefined\r\n    const e012_7 = a.e012 !== undefined && b.scalar !== undefined\r\n    if (e012_0 || e012_1 || e012_2 || e012_3 || e012_4 || e012_5 || e012_6 || e012_7) {\r\n        resultE012 = 0\r\n        if (e012_0) resultE012 += 1.0 * (a.scalar! * b.e012!)\r\n        if (e012_1) resultE012 += 1.0 * (a.e0! * b.e12!)\r\n        if (e012_2) resultE012 += -1.0 * (a.e1! * b.e02!)\r\n        if (e012_3) resultE012 += 1.0 * (a.e2! * b.e01!)\r\n        if (e012_4) resultE012 += 1.0 * (a.e01! * b.e2!)\r\n        if (e012_5) resultE012 += -1.0 * (a.e02! * b.e1!)\r\n        if (e012_6) resultE012 += 1.0 * (a.e12! * b.e0!)\r\n        if (e012_7) resultE012 += 1.0 * (a.e012! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e2: resultE2,\r\n        e01: resultE01,\r\n        e02: resultE02,\r\n        e12: resultE12,\r\n        e012: resultE012,\r\n    }\r\n    return result as GeometricProductResultType<A, B>\r\n}\r\n\r\nexport type InnerProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE2 ? BladeE2 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {}) &\r\n        (B extends BladeE02 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE12 : {}) &\r\n        (B extends BladeE012 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE1 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE0 : {}) &\r\n        (B extends BladeE12 ? BladeE2 : {}) &\r\n        (B extends BladeE012 ? BladeE02 : {})\r\n    ) : {}) &\r\n    (A extends BladeE2 ? (\r\n        (B extends BladeScalar ? BladeE2 : {}) &\r\n        (B extends BladeE2 ? BladeScalar : {}) &\r\n        (B extends BladeE02 ? BladeE0 : {}) &\r\n        (B extends BladeE12 ? BladeE1 : {}) &\r\n        (B extends BladeE012 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE1 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE02 ? (\r\n        (B extends BladeScalar ? BladeE02 : {}) &\r\n        (B extends BladeE2 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE12 ? (\r\n        (B extends BladeScalar ? BladeE12 : {}) &\r\n        (B extends BladeE1 ? BladeE2 : {}) &\r\n        (B extends BladeE2 ? BladeE1 : {}) &\r\n        (B extends BladeE12 ? BladeScalar : {}) &\r\n        (B extends BladeE012 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE012 ? (\r\n        (B extends BladeScalar ? BladeE012 : {}) &\r\n        (B extends BladeE1 ? BladeE02 : {}) &\r\n        (B extends BladeE2 ? BladeE01 : {}) &\r\n        (B extends BladeE12 ? BladeE0 : {})\r\n    ) : {})\r\n\r\nexport const innerProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): InnerProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    const scalar_1 = a.e1 !== undefined && b.e1 !== undefined\r\n    const scalar_2 = a.e2 !== undefined && b.e2 !== undefined\r\n    const scalar_3 = a.e12 !== undefined && b.e12 !== undefined\r\n    if (scalar_0 || scalar_1 || scalar_2 || scalar_3) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n        if (scalar_1) resultScalar += 1.0 * (a.e1! * b.e1!)\r\n        if (scalar_2) resultScalar += 1.0 * (a.e2! * b.e2!)\r\n        if (scalar_3) resultScalar += -1.0 * (a.e12! * b.e12!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    const e0_2 = a.e1 !== undefined && b.e01 !== undefined\r\n    const e0_3 = a.e2 !== undefined && b.e02 !== undefined\r\n    const e0_4 = a.e01 !== undefined && b.e1 !== undefined\r\n    const e0_5 = a.e02 !== undefined && b.e2 !== undefined\r\n    const e0_6 = a.e12 !== undefined && b.e012 !== undefined\r\n    const e0_7 = a.e012 !== undefined && b.e12 !== undefined\r\n    if (e0_0 || e0_1 || e0_2 || e0_3 || e0_4 || e0_5 || e0_6 || e0_7) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n        if (e0_2) resultE0 += -1.0 * (a.e1! * b.e01!)\r\n        if (e0_3) resultE0 += -1.0 * (a.e2! * b.e02!)\r\n        if (e0_4) resultE0 += 1.0 * (a.e01! * b.e1!)\r\n        if (e0_5) resultE0 += 1.0 * (a.e02! * b.e2!)\r\n        if (e0_6) resultE0 += -1.0 * (a.e12! * b.e012!)\r\n        if (e0_7) resultE0 += -1.0 * (a.e012! * b.e12!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e1 !== undefined && b.scalar !== undefined\r\n    const e1_2 = a.e2 !== undefined && b.e12 !== undefined\r\n    const e1_3 = a.e12 !== undefined && b.e2 !== undefined\r\n    if (e1_0 || e1_1 || e1_2 || e1_3) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n        if (e1_2) resultE1 += -1.0 * (a.e2! * b.e12!)\r\n        if (e1_3) resultE1 += 1.0 * (a.e12! * b.e2!)\r\n    }\r\n    let resultE2 = undefined\r\n    const e2_0 = a.scalar !== undefined && b.e2 !== undefined\r\n    const e2_1 = a.e1 !== undefined && b.e12 !== undefined\r\n    const e2_2 = a.e2 !== undefined && b.scalar !== undefined\r\n    const e2_3 = a.e12 !== undefined && b.e1 !== undefined\r\n    if (e2_0 || e2_1 || e2_2 || e2_3) {\r\n        resultE2 = 0\r\n        if (e2_0) resultE2 += 1.0 * (a.scalar! * b.e2!)\r\n        if (e2_1) resultE2 += 1.0 * (a.e1! * b.e12!)\r\n        if (e2_2) resultE2 += 1.0 * (a.e2! * b.scalar!)\r\n        if (e2_3) resultE2 += -1.0 * (a.e12! * b.e1!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e2 !== undefined && b.e012 !== undefined\r\n    const e01_2 = a.e01 !== undefined && b.scalar !== undefined\r\n    const e01_3 = a.e012 !== undefined && b.e2 !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e2! * b.e012!)\r\n        if (e01_2) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e012! * b.e2!)\r\n    }\r\n    let resultE02 = undefined\r\n    const e02_0 = a.scalar !== undefined && b.e02 !== undefined\r\n    const e02_1 = a.e1 !== undefined && b.e012 !== undefined\r\n    const e02_2 = a.e02 !== undefined && b.scalar !== undefined\r\n    const e02_3 = a.e012 !== undefined && b.e1 !== undefined\r\n    if (e02_0 || e02_1 || e02_2 || e02_3) {\r\n        resultE02 = 0\r\n        if (e02_0) resultE02 += 1.0 * (a.scalar! * b.e02!)\r\n        if (e02_1) resultE02 += -1.0 * (a.e1! * b.e012!)\r\n        if (e02_2) resultE02 += 1.0 * (a.e02! * b.scalar!)\r\n        if (e02_3) resultE02 += -1.0 * (a.e012! * b.e1!)\r\n    }\r\n    let resultE12 = undefined\r\n    const e12_0 = a.scalar !== undefined && b.e12 !== undefined\r\n    const e12_1 = a.e12 !== undefined && b.scalar !== undefined\r\n    if (e12_0 || e12_1) {\r\n        resultE12 = 0\r\n        if (e12_0) resultE12 += 1.0 * (a.scalar! * b.e12!)\r\n        if (e12_1) resultE12 += 1.0 * (a.e12! * b.scalar!)\r\n    }\r\n    let resultE012 = undefined\r\n    const e012_0 = a.scalar !== undefined && b.e012 !== undefined\r\n    const e012_1 = a.e012 !== undefined && b.scalar !== undefined\r\n    if (e012_0 || e012_1) {\r\n        resultE012 = 0\r\n        if (e012_0) resultE012 += 1.0 * (a.scalar! * b.e012!)\r\n        if (e012_1) resultE012 += 1.0 * (a.e012! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e2: resultE2,\r\n        e01: resultE01,\r\n        e02: resultE02,\r\n        e12: resultE12,\r\n        e012: resultE012,\r\n    }\r\n    return result as InnerProductResultType<A, B>\r\n}\r\n\r\nexport type ExteriorProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE2 ? BladeE2 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {}) &\r\n        (B extends BladeE02 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE12 : {}) &\r\n        (B extends BladeE012 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE0 ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE12 : {}) &\r\n        (B extends BladeE02 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE2 ? (\r\n        (B extends BladeScalar ? BladeE2 : {}) &\r\n        (B extends BladeE0 ? BladeE02 : {}) &\r\n        (B extends BladeE1 ? BladeE12 : {}) &\r\n        (B extends BladeE01 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE02 ? (\r\n        (B extends BladeScalar ? BladeE02 : {}) &\r\n        (B extends BladeE1 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE12 ? (\r\n        (B extends BladeScalar ? BladeE12 : {}) &\r\n        (B extends BladeE0 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE012 ? (\r\n        (B extends BladeScalar ? BladeE012 : {})\r\n    ) : {})\r\n\r\nexport const exteriorProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): ExteriorProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    if (scalar_0) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    if (e0_0 || e0_1) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e1 !== undefined && b.scalar !== undefined\r\n    if (e1_0 || e1_1) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n    }\r\n    let resultE2 = undefined\r\n    const e2_0 = a.scalar !== undefined && b.e2 !== undefined\r\n    const e2_1 = a.e2 !== undefined && b.scalar !== undefined\r\n    if (e2_0 || e2_1) {\r\n        resultE2 = 0\r\n        if (e2_0) resultE2 += 1.0 * (a.scalar! * b.e2!)\r\n        if (e2_1) resultE2 += 1.0 * (a.e2! * b.scalar!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e0 !== undefined && b.e1 !== undefined\r\n    const e01_2 = a.e1 !== undefined && b.e0 !== undefined\r\n    const e01_3 = a.e01 !== undefined && b.scalar !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e0! * b.e1!)\r\n        if (e01_2) resultE01 += -1.0 * (a.e1! * b.e0!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n    }\r\n    let resultE02 = undefined\r\n    const e02_0 = a.scalar !== undefined && b.e02 !== undefined\r\n    const e02_1 = a.e0 !== undefined && b.e2 !== undefined\r\n    const e02_2 = a.e2 !== undefined && b.e0 !== undefined\r\n    const e02_3 = a.e02 !== undefined && b.scalar !== undefined\r\n    if (e02_0 || e02_1 || e02_2 || e02_3) {\r\n        resultE02 = 0\r\n        if (e02_0) resultE02 += 1.0 * (a.scalar! * b.e02!)\r\n        if (e02_1) resultE02 += 1.0 * (a.e0! * b.e2!)\r\n        if (e02_2) resultE02 += -1.0 * (a.e2! * b.e0!)\r\n        if (e02_3) resultE02 += 1.0 * (a.e02! * b.scalar!)\r\n    }\r\n    let resultE12 = undefined\r\n    const e12_0 = a.scalar !== undefined && b.e12 !== undefined\r\n    const e12_1 = a.e1 !== undefined && b.e2 !== undefined\r\n    const e12_2 = a.e2 !== undefined && b.e1 !== undefined\r\n    const e12_3 = a.e12 !== undefined && b.scalar !== undefined\r\n    if (e12_0 || e12_1 || e12_2 || e12_3) {\r\n        resultE12 = 0\r\n        if (e12_0) resultE12 += 1.0 * (a.scalar! * b.e12!)\r\n        if (e12_1) resultE12 += 1.0 * (a.e1! * b.e2!)\r\n        if (e12_2) resultE12 += -1.0 * (a.e2! * b.e1!)\r\n        if (e12_3) resultE12 += 1.0 * (a.e12! * b.scalar!)\r\n    }\r\n    let resultE012 = undefined\r\n    const e012_0 = a.scalar !== undefined && b.e012 !== undefined\r\n    const e012_1 = a.e0 !== undefined && b.e12 !== undefined\r\n    const e012_2 = a.e1 !== undefined && b.e02 !== undefined\r\n    const e012_3 = a.e2 !== undefined && b.e01 !== undefined\r\n    const e012_4 = a.e01 !== undefined && b.e2 !== undefined\r\n    const e012_5 = a.e02 !== undefined && b.e1 !== undefined\r\n    const e012_6 = a.e12 !== undefined && b.e0 !== undefined\r\n    const e012_7 = a.e012 !== undefined && b.scalar !== undefined\r\n    if (e012_0 || e012_1 || e012_2 || e012_3 || e012_4 || e012_5 || e012_6 || e012_7) {\r\n        resultE012 = 0\r\n        if (e012_0) resultE012 += 1.0 * (a.scalar! * b.e012!)\r\n        if (e012_1) resultE012 += 1.0 * (a.e0! * b.e12!)\r\n        if (e012_2) resultE012 += -1.0 * (a.e1! * b.e02!)\r\n        if (e012_3) resultE012 += 1.0 * (a.e2! * b.e01!)\r\n        if (e012_4) resultE012 += 1.0 * (a.e01! * b.e2!)\r\n        if (e012_5) resultE012 += -1.0 * (a.e02! * b.e1!)\r\n        if (e012_6) resultE012 += 1.0 * (a.e12! * b.e0!)\r\n        if (e012_7) resultE012 += 1.0 * (a.e012! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e2: resultE2,\r\n        e01: resultE01,\r\n        e02: resultE02,\r\n        e12: resultE12,\r\n        e012: resultE012,\r\n    }\r\n    return result as ExteriorProductResultType<A, B>\r\n}\r\n\r\nexport const multiply = <A extends OptionalMultiVector>(a: A, b: number): A => {\r\n    const result: any = {\r\n        scalar: a.scalar !== undefined ? a.scalar * b : undefined,\r\n        e0: a.e0 !== undefined ? a.e0 * b : undefined,\r\n        e1: a.e1 !== undefined ? a.e1 * b : undefined,\r\n        e2: a.e2 !== undefined ? a.e2 * b : undefined,\r\n        e01: a.e01 !== undefined ? a.e01 * b : undefined,\r\n        e02: a.e02 !== undefined ? a.e02 * b : undefined,\r\n        e12: a.e12 !== undefined ? a.e12 * b : undefined,\r\n        e012: a.e012 !== undefined ? a.e012 * b : undefined,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const div = <A extends OptionalMultiVector>(a: A, b: number): A => {\r\n    const result: any = {\r\n        scalar: a.scalar !== undefined ? a.scalar / b : undefined,\r\n        e0: a.e0 !== undefined ? a.e0 / b : undefined,\r\n        e1: a.e1 !== undefined ? a.e1 / b : undefined,\r\n        e2: a.e2 !== undefined ? a.e2 / b : undefined,\r\n        e01: a.e01 !== undefined ? a.e01 / b : undefined,\r\n        e02: a.e02 !== undefined ? a.e02 / b : undefined,\r\n        e12: a.e12 !== undefined ? a.e12 / b : undefined,\r\n        e012: a.e012 !== undefined ? a.e012 / b : undefined,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const reversion = <A extends OptionalMultiVector>(a: A): A => {\r\n    const result: any = {\r\n        scalar: a.scalar && a.scalar,\r\n        e0: a.e0 && a.e0,\r\n        e1: a.e1 && a.e1,\r\n        e2: a.e2 && a.e2,\r\n        e01: a.e01 && -a.e01,\r\n        e02: a.e02 && -a.e02,\r\n        e12: a.e12 && -a.e12,\r\n        e012: a.e012 && -a.e012,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const repr = <A extends OptionalMultiVector>(a: A, digits: number = 3): string => {\r\n    let result = \"\"\r\n    if (a.scalar !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.scalar.toFixed(digits) + \"\"\r\n        } else {\r\n            result += a.scalar >= 0 ? \" + \" + a.scalar.toFixed(digits) + \"\" : \" - \" + Math.abs(a.scalar).toFixed(digits) + \"\"\r\n        }\r\n    }\r\n    if (a.e0 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e0.toFixed(digits) + \"e0\"\r\n        } else {\r\n            result += a.e0 >= 0 ? \" + \" + a.e0.toFixed(digits) + \"e0\" : \" - \" + Math.abs(a.e0).toFixed(digits) + \"e0\"\r\n        }\r\n    }\r\n    if (a.e1 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e1.toFixed(digits) + \"e1\"\r\n        } else {\r\n            result += a.e1 >= 0 ? \" + \" + a.e1.toFixed(digits) + \"e1\" : \" - \" + Math.abs(a.e1).toFixed(digits) + \"e1\"\r\n        }\r\n    }\r\n    if (a.e2 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e2.toFixed(digits) + \"e2\"\r\n        } else {\r\n            result += a.e2 >= 0 ? \" + \" + a.e2.toFixed(digits) + \"e2\" : \" - \" + Math.abs(a.e2).toFixed(digits) + \"e2\"\r\n        }\r\n    }\r\n    if (a.e01 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e01.toFixed(digits) + \"e01\"\r\n        } else {\r\n            result += a.e01 >= 0 ? \" + \" + a.e01.toFixed(digits) + \"e01\" : \" - \" + Math.abs(a.e01).toFixed(digits) + \"e01\"\r\n        }\r\n    }\r\n    if (a.e02 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e02.toFixed(digits) + \"e02\"\r\n        } else {\r\n            result += a.e02 >= 0 ? \" + \" + a.e02.toFixed(digits) + \"e02\" : \" - \" + Math.abs(a.e02).toFixed(digits) + \"e02\"\r\n        }\r\n    }\r\n    if (a.e12 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e12.toFixed(digits) + \"e12\"\r\n        } else {\r\n            result += a.e12 >= 0 ? \" + \" + a.e12.toFixed(digits) + \"e12\" : \" - \" + Math.abs(a.e12).toFixed(digits) + \"e12\"\r\n        }\r\n    }\r\n    if (a.e012 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e012.toFixed(digits) + \"e012\"\r\n        } else {\r\n            result += a.e012 >= 0 ? \" + \" + a.e012.toFixed(digits) + \"e012\" : \" - \" + Math.abs(a.e012).toFixed(digits) + \"e012\"\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nexport const regressiveProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    dual(exteriorProduct(dual(a), dual(b)))\r\n\r\nexport const sandwichProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    geometricProduct(b, geometricProduct(a, reversion(b)))\r\n\r\nexport const commutatorProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    multiply(sub(geometricProduct(a, b), geometricProduct(b, a)), 0.5)\r\n\r\nexport const exponential = <A extends OptionalMultiVector>(a: A) => {\r\n    const gp = geometricProduct(a, a) as any\r\n    const s = gp.scalar || 0\r\n\r\n    // TODO: Check if non-scalar parts are non-zero\r\n\r\n    if (s < 0) {\r\n        const rootS = Math.sign(s) * Math.sqrt(Math.abs(s))\r\n        return add({ scalar: Math.cos(rootS) }, multiply(a, Math.sin(rootS) / rootS))\r\n    } else if (s > 0) {\r\n        const rootS = Math.sign(s) * Math.sqrt(Math.abs(s))\r\n        return add({ scalar: Math.cosh(rootS) }, multiply(a, Math.sinh(rootS) / rootS))\r\n    } else {\r\n        return add({ scalar: 1 }, a)\r\n    }\r\n}","import React from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport function TutorialIndex() {\r\n    return (\r\n        <div>\r\n            <h3>Index</h3>\r\n            <div>\r\n                This tutorial tries to teach Geometric Algebra (GA) in an interactive way with runnable code and visualizations.\r\n                It is not meant to be an entirely bottom-up way where we try to derive every single result.\r\n                Instead the focus is on trying to create an understanding for GA and gradually introduce new things while\r\n                directly applying the learnt concepts.\r\n            </div>\r\n            <h4>Sections</h4>\r\n            <ol>\r\n                <li><Link to=\"/motivation\">Motivation</Link></li>\r\n                <li><Link to=\"/ga-basics\">Geometric Algebra Basics</Link></li>\r\n                <li><Link to=\"/pga\">Projective Geometric Algebra</Link></li>\r\n                <li><Link to=\"/pga-geometry\">PGA Geometry</Link></li>\r\n            </ol>\r\n        </div>\r\n    )\r\n}","import React from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\nexport function Motivation() {\r\n    return (\r\n        <div>\r\n            <h3>Motivation</h3>\r\n\r\n            <h5>CoffeeShop Examples</h5>\r\n            <div>\r\n                The CoffeeShop is a website containing many examples making use of Geometric Algebra.\r\n                Below I listed some interesting ones. After completing this tutorial we will be able\r\n                to reproduce them.\r\n            </div>\r\n            <ul>\r\n                <li><a href=\"https://enkimute.github.io/ganja.js/examples/coffeeshop.html#pga3d_skinning\">Skinning (smooth blending)</a></li>\r\n                <li><a href=\"https://enkimute.github.io/ganja.js/examples/coffeeshop.html#pga3d_physics_symmetric_top\">Rigidbody physics with unified rotation and translation</a></li>\r\n                <li><a href=\"https://enkimute.github.io/ganja.js/examples/coffeeshop.html#pga2d_inverse_kinematics\">Inverse kinematics</a></li>\r\n                <li><a href=\"https://enkimute.github.io/ganja.js/examples/coffeeshop.html#pga2d_differentiation\">Automatic differentiation</a></li>\r\n                <li><a href=\"https://enkimute.github.io/ganja.js/examples/coffeeshop.html#ga3d_rotor_estimation\">Rotor estimation between two point clouds</a></li>\r\n            </ul>\r\n\r\n            <h4><Link to=\"/ga-basics\">Next: Geometric Algebra Basics</Link></h4>\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { InteractiveCode } from \"./InteractiveCode\"\r\nimport * as cnt from \"./CodeGATutorial\"\r\n\r\nexport function GATutorial() {\r\n    // Need to retrigger equation typesetting as it's only done once on startup\r\n    useEffect(() => {\r\n        // eslint-disable-next-line no-eval\r\n        eval(\"if (MathJax && MathJax.typeset) MathJax.typeset();\")\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <h3>Geometric Algebra Basics</h3>\r\n            <div>\r\n                Usually introductions to GA begin by defining various rules and going over derivations\r\n                before doing anything useful with them. I will also define some rules but try to\r\n                get to the interesting stuff more quickly.\r\n            </div>\r\n\r\n            <h4>Vectors</h4>\r\n            <div>\r\n                Like for the standard 2D vector algebra in GA we have two basis vectors $e_x, e_y$\r\n                using which arbitrary vectors $v = x e_x + y e_y$ can be formed. Below is some runnable and editable\r\n                code that forms such vectors and then displays them as points. The basis vectors\r\n                $e_x, e_y$ are labeled <code>e0</code> and <code>e1</code> in the code. We specify the non-zero\r\n                coefficients for each basis vector when creating a new vector.\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.codeRenderPoint}\r\n                hideOutput={true} withVisualizer={true}\r\n            />\r\n\r\n            <h4>Geometric Product</h4>\r\n            <div>\r\n                The product which defines Geometric Algebra and is its most important aspect is called the\r\n                Geometric Product. There are two useful rules for using the geometric product which will now\r\n                be introduced.\r\n            </div>\r\n            <h5>Rule 1: Basis vectors square to +1</h5>\r\n            <div>\r\n                 Multiplying two same basis vectors together with the geometric product\r\n                will result in $+1$ (for now...) if they are the same.\r\n\r\n                {`\\\\begin{equation}\r\n                e_x e_x = 1, e_y e_y = 1\r\n                \\\\end{equation}`}\r\n\r\n                This is similar to how the dot product in standard vector algebra works.\r\n                Let's verify these results with the code again, this time just logging some text instead of visualizing.\r\n            </div>\r\n            <InteractiveCode sourceCode={cnt.codeSquareBasisVectors} />\r\n\r\n            <h5>Rule 2: Different basis vectors anti-commute</h5>\r\n            <div>\r\n                What is new is that we can also multiply two different basis vectors and the result will not be zero,\r\n                but instead can't be simplified further.\r\n\r\n                {`\\\\begin{equation}\r\n                e_x e_y = e_{xy}\r\n                \\\\end{equation}`}\r\n\r\n                {`$e_{xy}$`} here is just shorthand for the two basis vectors multiplied together.\r\n                Such elements made up of two basis vectors are called bivectors.\r\n            </div>\r\n            <div>\r\n                Importantly the order of the product matters. A rule is that when you swap the factors\r\n                of a product of basis vectors you pick up a minus sign. We say that the basis vectors anti-commute.\r\n\r\n                {`\\\\begin{equation}\r\n                e_{xy} = e_x e_y = -e_y e_x = -e_{yx}\r\n                \\\\end{equation}`}\r\n            </div>\r\n            <InteractiveCode sourceCode={cnt.codeExteriorProduct} />\r\n\r\n            <h5>Practice</h5>\r\n            <div>\r\n                Let's now use these two basic rules we just learnt and see what some results are when we use them:\r\n\r\n                {`\\\\begin{aligned}\r\n                e_x e_y e_x & = & \\\\text{(Rewrite as shorthand)} \\\\\\\\\r\n                e_{xyx} & = & \\\\text{(Swap neighbours on the right, pick up minus sign)} \\\\\\\\\r\n                -e_{xxy} & = & \\\\text{(Multiplying same basis vectors results in 1, e_xx = e_x e_x = 1)} \\\\\\\\\r\n                -e_y &\r\n                \\\\end{aligned}`}\r\n\r\n                We can verify these results with the code:\r\n            </div>\r\n            \r\n            <InteractiveCode sourceCode={cnt.codeAntiCommute} />\r\n\r\n            <h5>Terminology</h5>\r\n            <div>\r\n                <div>Here's a list of some more terminology that is often used in GA</div>\r\n                <ul>\r\n                    <li>\r\n                        <b>Multivector</b>: any element of the algebra (eg. {`$1 + 2 e_x + 5 e_{xy}$`})\r\n                        </li>\r\n                    <li>\r\n                        <b>Basis blade</b>: basis vectors and any combination of them\r\n                        (eg. in 2D we have four in total: {`$1, e_x, e_y, e_{xy}$`})\r\n                    </li>\r\n                    <li><b>Grade</b>: the degree of a multivector\r\n                        (eg. $1$ is grade $0$, $e_x$ is grade $1$,\r\n                        $e_x + 5 e_y$ it also grade $1$, {`$e_{xy}$`} is grade $2$)\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n            <h3>Rotors</h3>\r\n\r\n            <h4>Squaring bivectors</h4>\r\n            <div>\r\n                Now for something more interesting, let's see what happens if we square the bivector {`$e_{xy}$`},\r\n                that is, multiplying it with itself:\r\n            </div>\r\n            <InteractiveCode sourceCode={cnt.codeSquareBivector} />\r\n\r\n            <div>\r\n                {`\\\\begin{equation}\r\n                e_{xy}^2 = e_{xy} e_{xy} = e_{xyxy} = -e_{xyyx} = -e_{xx} = -1\r\n                \\\\end{equation}`}\r\n\r\n                We can see the square of the bivector {`$e_{xy}$`} is $-1$. This shows that such a bivector is\r\n                very similar to the imaginary unit $i$ of complex numbers which was specifically introduced to\r\n                square to $-1$. Here we didn't have to introduce anything new and we automatically had such\r\n                an element in our algebra.\r\n            </div>\r\n\r\n            <br />\r\n\r\n            <div>\r\n                There is still one caveat. While {`$e_{xy}$`} squares to $-1$, so does {`$e_{yx}$`}.\r\n                So which one do we use? Let's try to visualize what multiplying a vector does for both of them\r\n                using {`$v' = e_{xy} v$`} and {`$v' = e_{yx} v$`}.\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.codeRotate2DOrientation}\r\n                hideOutput={true} withVisualizer={true}\r\n            />\r\n\r\n            <div>\r\n                We can see that {`$e_{xy}$`} produces a clockwise (CW) rotation by 90 and {`$e_{yx}$`} produces a counter-clockwise (CCW)\r\n                rotation by 90. We will stick with the CCW version using {`$e_{yx}$`}. Instead of that to make a CCW\r\n                rotation we could have also swapped the order of the product ({`$v' = e_{xy} v$`}) but using {`$e_{yx}$`} instead will allow us to\r\n                follow the usual conventions later.\r\n            </div>\r\n\r\n            <h4>Rotating 2D vectors using rotors</h4>\r\n\r\n            <div>\r\n                As mentioned before {`$e_{yx}$`} can be identified as the imaginary unit $i$ of complex numbers hence\r\n                we can represent complex numbers as {`$a + b e_{yx}$`} and a CCW rotation in the XY plane\r\n                by an arbitrary angle $\\phi$ can be performed just like with complex numbers\r\n                using <a href=\"https://en.wikipedia.org/wiki/Euler%27s_formula\">Euler's formula</a>\r\n\r\n                {`\\\\begin{equation}\r\n                R(\\\\phi) = e^{\\\\phi e_{yx}} = cos(\\\\phi) + e_{yx} sin(\\\\phi)\r\n                \\\\end{equation}`}\r\n\r\n                The object $R$ you get after exponentiating is called a rotor\r\n                (because it rotates when you multiply with it).\r\n\r\n                Unlike with complex numbers now however, we can multiply a vector by a rotor directly instead of\r\n                having to treat vectors as if they were complex numbers.\r\n            </div>\r\n            <InteractiveCode sourceCode={cnt.codeRotate2D}\r\n                hideOutput={true} withVisualizer={true}\r\n            />\r\n            <div>\r\n                {`\\\\begin{equation}\r\n                v R(\\\\phi) = (x e_x + y e_y) (cos(\\\\phi) + e_{yx} sin(\\\\phi)) =\r\n                e_x (x cos(\\\\phi) - y sin(\\\\phi)) + e_y (x sin(\\\\phi) + y cos(\\\\phi))\r\n                \\\\end{equation}`}\r\n            </div>\r\n\r\n            <h4>Higher dimensions</h4>\r\n            <div>\r\n                It turns out that the two dimensional rotor application formula $v' = v R$ was slightly special.\r\n                In the general case it is necessary to use a two sided product\r\n                \r\n                {`\r\n                \\\\begin{equation}\r\n                v' = R v \\\\widetilde{R}\r\n                \\\\end{equation}\r\n                `}\r\n                \r\n                which is also called the sandwich product. {\"$\\\\widetilde{R}$\"} here stands for <a href=\"https://en.wikipedia.org/wiki/Paravector#Reversion_conjugation\">reversion</a> of $R$ which\r\n                just means reversing the order of all basis vectors. For example {\"$e_{yx}$\"} becomes {\"$e_{xy}$\"}.\r\n                As we already know from the second rule of the geometric product, such a change of order just produces a\r\n                minus sign for the bivectors, so {\"$\\\\widetilde{e_{yx}} = -e_{xy}$\"}.\r\n            </div>\r\n            <div>    \r\n                Another thing that changes with the sandwich product\r\n                is that we multiply with the rotor twice, so our rotor will only need to contain half of the rotation angle.\r\n\r\n                {`\r\n                \\\\begin{equation}\r\n                R(\\\\phi) = e^{e_{yx} \\\\frac{\\\\phi}{2}}\r\n                \\\\end{equation}\r\n                `}\r\n            </div>\r\n\r\n            <div>\r\n                We can now verify that this will indeed give the same results in 2D as the simple one-sided product\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.codeGeneralRotor2D}\r\n                hideOutput={true} withVisualizer={true}\r\n            />\r\n\r\n            <div>\r\n                In the three dimensional case, if we wanted to create\r\n                a rotor that rotates in the XZ plane by $\\phi$ CCW our rotor would look like this:\r\n\r\n                {`\r\n                \\\\begin{equation}\r\n                R(\\\\phi) = e^{e_{zx} \\\\frac{\\\\phi}{2}}\r\n                \\\\end{equation}\r\n                `}\r\n\r\n                We can then also combine rotations in different planes into a single rotor by multiplying them. A rotor that rotates by $\\phi$ CCW in the\r\n                XZ plane followed by a rotation of $\\theta$ CCW in the XY plane looks like this\r\n\r\n                {`\r\n                \\\\begin{equation}\r\n                R(\\\\phi, \\\\theta) = e^{e_{yx} \\\\frac{\\\\theta}{2}} e^{e_{zx} \\\\frac{\\\\phi}{2}}\r\n                \\\\end{equation}\r\n                `}\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.codeGeneralRotor3D} editorStyle={{height: 350}} />\r\n\r\n            <div>\r\n                These elements that are like the 3D version of complex numbers are called <a href=\"https://en.wikipedia.org/wiki/Quaternion\">quaternions</a>.\r\n            </div>\r\n\r\n            <h4>More on reversion</h4>\r\n            <div>\r\n                Applying the reversion operation on a rotor reverses its effect, for example applying the reversion operation to a rotor that rotates\r\n                by 90 CCW will make it rotate by 90 CW (ie. -90 CCW). A result of this is that a rotor multiplied by its reversal produces the\r\n                identity {`$R \\\\widetilde{R} = 1$`} which does nothing when applied as demonstrated in the code below. Here we also\r\n                make use of the <code>sandwichProduct()</code> function instead of writing the sandwich product\r\n                using <code>geometricProduct()</code> and <code>reversion()</code>.\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.codeReversionIdentity} editorStyle={{height: 300}} />\r\n\r\n            <h3>Conclusion</h3>\r\n            <div>\r\n                In this section we introduced Geometric Algebra. We learnt the basic rules of the Geometric Product and how to work with them.\r\n                We also learnt about rotors which generalize the rotations created by complex numbers to any dimension and also puts them\r\n                directly in the context of vectors.\r\n            </div>\r\n            <br />\r\n            <div>\r\n                In the next section we will learn how we can introduce translation in the rotors so we can do both translation and rotation\r\n                using the same rotor and just one sandwich product. This will prove to have many advantages allow even further generalization.\r\n            </div>\r\n\r\n            <h4><Link to=\"/pga\">Next: Projective Geometric Algebra</Link></h4>\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from \"react\"\r\nimport { InteractiveCode } from \"./InteractiveCode\"\r\nimport * as cnt from \"./CodePGATutorial\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport function PGATutorial() {\r\n    // Need to retrigger equation typesetting as it's only done once on startup\r\n    useEffect(() => {\r\n        // eslint-disable-next-line no-eval\r\n        eval(\"if (MathJax && MathJax.typeset) MathJax.typeset();\")\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <h3>Translations</h3>\r\n            <div>\r\n                So far we learnt how to do rotations using rotors. Another important operation is translation. Naively we could\r\n                just use vector addition to achieve translation using some offset vector $d = d_x e_x + d_y e_y$\r\n\r\n                {`\\\\begin{equation}\r\n                v' = v + d\r\n                \\\\end{equation}`}\r\n\r\n                If we have two translation vectors $a$ and $b$ we can combine their action by adding them to get a single translation vector $d = a + b$.\r\n                This all seems very obvious and straightforward.\r\n            </div>\r\n\r\n            <br />\r\n\r\n            <div>\r\n                What if we wanted to do both translation and rotation? Using vector addition for translation and rotors for rotation our operation\r\n                would look like this\r\n\r\n                {`\\\\begin{equation}\r\n                v' = R v \\\\widetilde{R} + d\r\n                \\\\end{equation}`}\r\n\r\n                Now if we wanted to compose two translations and rotations, we would have two rotors $R_1$ and $R_2$ and two translation vectors $d_1$ and $d_2$.\r\n                First we would apply $R_1$ and $d_1$ according to the formula above. Then we would apply $R_2$ and $d_2$ on the result of the previous operation.\r\n\r\n                {`\\\\begin{aligned}\r\n                v' & = R_1 v \\\\widetilde{R_1} + d_1 \\\\\\\\\r\n                v'' & = R_2 v' \\\\widetilde{R_2} + d_2 = R_2 (R_1 v \\\\widetilde{R_1} + d_1) \\\\widetilde{R_2} + d_2\r\n                \\\\end{aligned}`}\r\n\r\n                We could multiply this out but we will get a lot of terms and the operations don't compose as nicely as they did when we had only rotations or translations.\r\n                Is there a way we can do both rotation and translation with a single rotor? Projective Geometric Algebra (PGA) sets out to do this.\r\n            </div>\r\n\r\n            <h3>Projective Geometric Algebra</h3>\r\n            <h5>A new kind of basis vector</h5>\r\n            <div>\r\n                PGA starts with the familiar basis vectors that square to $+1$ and also adds another basis vector $e_0$ one that squares to $0$.\r\n                In two dimensional PGA we thus have basis vectors $e_x$, $e_y$ and $e_0$. As a result there will also be three bivectors {`$e_{0x}, e_{0y}, e_{xy}$`} and one\r\n                trivector {`$e_{0xy}$`}.\r\n            </div>\r\n            <br />\r\n            <div>\r\n                We will see that this strange additional basis vector allows us to encode both rotations and translations in a single rotor and\r\n                also many more things we couldn't easily do before.\r\n            </div>\r\n            <h5>Points</h5>\r\n            <div>\r\n                Another peculiarity of PGA is that points are not encoded as vectors $x e_x + y e_y$ anymore but as\r\n\r\n                {`\\\\begin{equation}\r\n                P = x e_{y0} + y e_{0x} + e_{xy}\r\n                \\\\end{equation}`}\r\n\r\n                In the code below we display some points like before but this time using 2D PGA. The vector $e_0$ is denoted by\r\n                <code>e0</code> and $e_x, e_y$ as <code>e1</code> and <code>e2</code>.\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.pgaPoints}\r\n                hideOutput={true} withVisualizer={true} />\r\n\r\n            <div>\r\n                In the code we can also see that the rendered point coordinate gets divided by\r\n                the {`$e_{xy}$`} part of the multivector. Multiplying the multivector by a scalar thus\r\n                won't have any effect on which point the multivector encodes as the final position gets\r\n                divided by the {`$e_{xy}$`} part again which was also scaled by the same amount.\r\n            </div>\r\n\r\n            <h5>Translators</h5>\r\n            <div>\r\n                As promised this weird setup will allow us to perform translations using rotors. Rotors that only do\r\n                translation are also called translators and we denote them by $T$.\r\n            </div>\r\n            <div>\r\n                Just like with the rotors we use the exponential function to generate translators from our algebra.\r\n                A translator that moves by $d$ in the X direction is given by {`$T = e^{\\\\frac{d}{2} e_{0x}}$`}.\r\n                If we compare this to the point encoding we will notice that {`$e_{0x}$`} is the bivector related to the\r\n                Y coordinate, so here the translators perform a translation that is orthogonal to the bivector's direction.\r\n                As previously we will apply the translator using the sandwich product.\r\n            </div>\r\n            <div>\r\n                This time to calculate the result of the exponential we can not make use of Euler's formula as it only applies to\r\n                elements that square to $-1$ and the bivector {`$e_{0x}$`} squares to $0$. The equivalent of Euler's formula for\r\n                elements squaring to $0$ is fortunately very simple\r\n\r\n                {`\\\\begin{equation}\r\n                T = e^{\\\\frac{d}{2} e_{0x}} = 1 + \\\\frac{d}{2} e_{0x}\r\n                \\\\end{equation}`}\r\n\r\n                so all we picked up was the additional scalar $1$.\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.translators}\r\n                hideOutput={true} withVisualizer={true} />\r\n\r\n            <h5>Motors</h5>\r\n            <div>\r\n                We can also compose rotors and translators using multiplications. We call the resulting elements motors and denote them\r\n                by $m$. For example a motor\r\n\r\n                {`\\\\begin{equation}\r\n                m = e^{\\\\frac{\\\\phi}{2} e_{yx}} e^{\\\\frac{d}{2} e_{0x}}\r\n                \\\\end{equation}`}\r\n\r\n                will first perform the translation of the previous example followed by a rotation around the origin in the\r\n                XY plane by $\\phi$ CCW.\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.motors}\r\n                hideOutput={true} withVisualizer={true} />\r\n\r\n            <div>\r\n                So far we have only been visualizing single points. With points we can not observe the effect that\r\n                rotation has besides how it affects the position of the points. To visualize the rotation we will\r\n                look at how a set of points gets transformed instead, such as a box. When applying a rotor that rotates\r\n                we would expect the box to also rotate. We will use the provided <code>renderBoxPGA()</code> function\r\n                for this purpose. The way it works is that it takes four points that are offset relative to the origin\r\n                and transforms them with the given motor.\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.motorsBox}\r\n                hideOutput={true} withVisualizer={true} />\r\n\r\n            <div>\r\n                Our motor here produces a CCW rotation of {`$\\\\frac{\\\\pi}{4}$`} (twice the amount written in the code) which\r\n                indeed rotated our box by 45.\r\n            </div>\r\n\r\n            <h3>Motor interpolation</h3>\r\n            <div>\r\n                A very useful property of PGA is its ability to smoothly interpolate between motors. Previously if we had separate\r\n                translation and rotation (eg. when using vector addition for translation and rotors for rotation) it was not clear how one would\r\n                interpolate between two of such transformations.\r\n            </div>\r\n\r\n            <br />\r\n\r\n            <div>\r\n                Interpolating translations and vectors is easy, for example with linear\r\n                interpolation. If we are given two vectors $v_1, v_2$ and a blending factor $\\alpha$\r\n                the interpolated vector $v(\\alpha)$ is given by\r\n\r\n                {`\\\\begin{equation}\r\n                v(v_1, v_2, \\\\alpha) = (1 - \\\\alpha) v_1 + \\\\alpha v_2\r\n                \\\\end{equation}`}\r\n            </div>\r\n            <div>\r\n                Interpolating rotations and rotors is a bit trickier but still relatively common, for example\r\n                using quaternions and <a href=\"https://en.wikipedia.org/wiki/Slerp\">spherical linear interpolation</a>.\r\n            </div>\r\n\r\n            <div>\r\n                So how do we interpolate between two motors $m_1$ and $m_2$ such as in the following example?\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.motorBlendingMotivation}\r\n                hideOutput={true} withVisualizer={true} />\r\n\r\n            <br />\r\n\r\n            <h5>With known exponents</h5>\r\n            <div>\r\n                Thankfully our hard work of learning about motors will pay off here. Imagine we are given the exponents of two\r\n                motors $m_1$ and $m_2$ which we denote by $a_1$ and $a_2$ (ie. {`$m_1 = e^{a_1}, m_2 = e^{a_2}$`}). To get the interpolated\r\n                motor $m(\\alpha)$ all we have to do is linearly interpolate between the exponents and then exponentiate\r\n\r\n                {`\\\\begin{equation}\r\n                m(\\\\alpha) = e^{(1 - \\\\alpha) a_1 + \\\\alpha a_2}\r\n                \\\\end{equation}`}\r\n            </div>\r\n\r\n            <InteractiveCode sourceCode={cnt.motorBlending}\r\n                hideOutput={true} withVisualizer={true} />\r\n\r\n            <div>\r\n                We can see the interpolation produces a curve. If we interpolated translation and rotation separately using\r\n                linear interpolation we would have just gotten a straight line.\r\n            </div>\r\n\r\n            <h5>With unknown exponents</h5>\r\n            <div>\r\n                What if we don't know the exponents of the motors? This would happen for example when we keep composing motors.\r\n                A very practical example where that occurs is if we used a motor to describe the position and rotation\r\n                of a rigidbody in a physics simulation.\r\n            </div>\r\n            <div>\r\n                Just like in usual algebra, we can take the logarithm of an exponential to get its exponent. The logarithm of a\r\n                motor in PGA is given by\r\n\r\n                {`\\\\begin{equation}\r\n                log(m) = \\\\langle \\\\frac{m}{||m||} \\\\rangle_2\r\n                \\\\end{equation}`}\r\n\r\n                where $||m||$ stands for the norm of the motor and $\\langle ... \\rangle_2$ stands for only keeping the\r\n                grade $2$ parts (ie. all bivectors) of the result. $||m||$ can easily be calculated as {`$\\\\sqrt{m \\\\widetilde{m}}$`}.\r\n            </div>\r\n\r\n            <h3>Conclusion</h3>\r\n            <div>\r\n                TODO\r\n            </div>\r\n\r\n            <h4><Link to=\"/pga-geometry\">Next: PGA Geometry</Link></h4>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useMemo } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { BrowserRouter as Router, Switch, Route, useLocation, Link } from \"react-router-dom\"\nimport { TutorialIndex, GATutorial, PGATutorial, Motivation } from \"./pages\"\nimport * as ga from \"./ga/ga_pp\"\nimport * as ga3d from \"./ga/ga_ppp\"\nimport * as pga from \"./ga/ga_zpp\"\nimport * as viz from \"./ga/viz2d\"\nimport { PGAGeometryTutorial } from \"./pages/PGAGeometryTutorial\"\n\n// Dictionary of path elements to replace with full names\n// in the breadcrumbs.\nconst breadcrumbPathToName: { [key: string]: string } = {\n    \"motivation\": \"Motivation\",\n    \"ga-basics\": \"Geometric Algebra Basics\",\n    \"pga\": \"Projective Geometric Algebra\",\n    \"pga-geometry\": \"PGA Geometry\"\n}\n\nexport const pathToBreadcrumbs = (path: string) => {\n    const pathNames = [\"Geometric Algebra\"]\n    const pathUrls = [\"\"]\n\n    let cleanedPath = path\n    if (cleanedPath[cleanedPath.length - 1] === \"/\") {\n        cleanedPath = cleanedPath.substr(0, cleanedPath.length - 1)\n    }\n\n    let pathSplit = cleanedPath.substr(1).split(\"/\")\n\n    while (pathSplit.length > 0) {\n        const pathElement = pathSplit[0]\n\n        // Add name\n        pathNames.push(breadcrumbPathToName[pathElement] ? breadcrumbPathToName[pathElement] : pathElement)\n\n        // Add url by taking the previous url and concatenating the new path element\n        pathUrls.push(`${pathUrls[pathUrls.length - 1]}/${pathSplit[0]}`)\n\n        // Remove the element we just processed\n        pathSplit.splice(0, 1)\n    }\n\n    // Make the first breadcrumb url a slash.\n    pathUrls[0] = \"/\"\n\n    return pathNames.map((name, i) => {\n        return { name: name, url: pathUrls[i] }\n    })\n}\n\nfunction NotFound() {\n    return <h3>Not Found</h3>\n}\n\nfunction TutorialSite() {\n    const location = useLocation()\n\n    const breadcrumbs = useMemo(() => {\n        const crumbs = pathToBreadcrumbs(location.pathname)\n\n        return crumbs\n            .map(c => <Link to={c.url}>{c.name}</Link>)\n            .reduce((l, r) => <> {l} &gt; {r}  </>)\n    }, [location])\n\n    return (\n        <>\n            <div className=\"demo-container mdl-grid\">\n                <div className=\"mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone\"></div>\n                <div\n                    className=\"demo-content mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--8-col\">\n                    <div className=\"demo-crumbs mdl-color-text--grey-500\">\n                        {breadcrumbs}\n                    </div>\n                    <Switch>\n                        <Route path=\"/motivation\">\n                            <Motivation />\n                        </Route>\n                        <Route path=\"/ga-basics\">\n                            <GATutorial />\n                        </Route>\n                        <Route path=\"/pga\">\n                            <PGATutorial />\n                        </Route>\n                        <Route path=\"/pga-geometry\">\n                            <PGAGeometryTutorial />\n                        </Route>\n                        <Route exact path=\"/\">\n                            <TutorialIndex />\n                        </Route>\n                        <Route path=\"*\">\n                            <NotFound />\n                        </Route>\n                    </Switch>\n                </div>\n            </div>\n            <footer className=\"demo-footer mdl-mini-footer\">\n                <div className=\"mdl-mini-footer--left-section\">\n                    <ul className=\"mdl-mini-footer--link-list\">\n                    </ul>\n                </div>\n            </footer>\n        </>\n    )\n}\n\nfunction App() {\n    useEffect(() => {\n        // Set variables on window so we can use it in interactive code\n        const wnd = window as any\n        wnd.ga = ga\n        wnd.ga3d = ga3d\n        wnd.pga = pga\n        wnd.viz = viz\n        wnd.renderScene = (scene: viz.Scene, renderTarget: HTMLElement) => {\n            ReactDOM.render(viz.SceneView({ scene: scene }), renderTarget)\n        }\n\n        // eslint-disable-next-line no-eval\n        eval(`\n            var ga = wnd.ga;\n            var ga3d = wnd.ga3d;\n            var pga = wnd.pga;\n            var viz = wnd.viz;\n            var renderScene = wnd.renderScene;\n        `)\n    }, [])\n\n    return (\n        <Router>\n            <TutorialSite />\n        </Router>\n    )\n}\n\nexport default App\n","export type BladeScalar = { scalar: number }\r\nexport type BladeE0 = { e0: number }\r\nexport type BladeE1 = { e1: number }\r\nexport type BladeE01 = { e01: number }\r\n\r\nexport type Scalar = BladeScalar\r\nexport type Vector = BladeE0 & BladeE1\r\nexport type BiVector = BladeE01\r\nexport type PseudoBiVector = BladeScalar\r\nexport type PseudoVector = BladeE0 & BladeE1\r\nexport type PseudoScalar = BladeE01\r\nexport type Even = BladeScalar & BladeE01\r\nexport type Odd = BladeE0 & BladeE1\r\nexport type MultiVector = BladeScalar & BladeE0 & BladeE1 & BladeE01\r\n\r\nexport type OptionalMultiVector = {\r\n    scalar?: number\r\n    e0?: number\r\n    e1?: number\r\n    e01?: number\r\n}\r\n\r\nexport type AddResultType<A, B> = (\r\n    (A extends BladeScalar ? BladeScalar : {}) &\r\n    (B extends BladeScalar ? BladeScalar : {}) &\r\n    (A extends BladeE0 ? BladeE0 : {}) &\r\n    (B extends BladeE0 ? BladeE0 : {}) &\r\n    (A extends BladeE1 ? BladeE1 : {}) &\r\n    (B extends BladeE1 ? BladeE1 : {}) &\r\n    (A extends BladeE01 ? BladeE01 : {}) &\r\n    (B extends BladeE01 ? BladeE01 : {})\r\n)\r\n\r\nexport const add = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): AddResultType<A, B> => {\r\n    const result: any = {\r\n        scalar: (a.scalar !== undefined || b.scalar !== undefined) ? (a.scalar || 0) + (b.scalar || 0) : undefined,\r\n        e0: (a.e0 !== undefined || b.e0 !== undefined) ? (a.e0 || 0) + (b.e0 || 0) : undefined,\r\n        e1: (a.e1 !== undefined || b.e1 !== undefined) ? (a.e1 || 0) + (b.e1 || 0) : undefined,\r\n        e01: (a.e01 !== undefined || b.e01 !== undefined) ? (a.e01 || 0) + (b.e01 || 0) : undefined,\r\n    }\r\n    return result as AddResultType<A, B>\r\n}\r\n\r\nexport const sub = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): AddResultType<A, B> => {\r\n    const result: any = {\r\n        scalar: (a.scalar !== undefined || b.scalar !== undefined) ? (a.scalar || 0) - (b.scalar || 0) : undefined,\r\n        e0: (a.e0 !== undefined || b.e0 !== undefined) ? (a.e0 || 0) - (b.e0 || 0) : undefined,\r\n        e1: (a.e1 !== undefined || b.e1 !== undefined) ? (a.e1 || 0) - (b.e1 || 0) : undefined,\r\n        e01: (a.e01 !== undefined || b.e01 !== undefined) ? (a.e01 || 0) - (b.e01 || 0) : undefined,\r\n    }\r\n    return result as AddResultType<A, B>\r\n}\r\n\r\nexport type DualResultType<A> = (\r\n    (A extends BladeScalar ? BladeE01 : {}) &\r\n    (A extends BladeE0 ? BladeE1 : {}) &\r\n    (A extends BladeE1 ? BladeE0 : {}) &\r\n    (A extends BladeE01 ? BladeScalar : {})\r\n)\r\n\r\nexport const dual = <A extends OptionalMultiVector>(a: A): DualResultType<A> => {\r\n    const result: any = {\r\n        scalar: a.e01 !== undefined ? 1.0 * a.e01 : undefined,\r\n        e0: a.e1 !== undefined ? 1.0 * a.e1 : undefined,\r\n        e1: a.e0 !== undefined ? -1.0 * a.e0 : undefined,\r\n        e01: a.scalar !== undefined ? 1.0 * a.scalar : undefined,\r\n    }\r\n    return result as DualResultType<A>\r\n}\r\n\r\nexport type GeometricProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE0 ? BladeScalar : {}) &\r\n        (B extends BladeE1 ? BladeE01 : {}) &\r\n        (B extends BladeE01 ? BladeE1 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE0 ? BladeE01 : {}) &\r\n        (B extends BladeE1 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE0 ? BladeE1 : {}) &\r\n        (B extends BladeE1 ? BladeE0 : {}) &\r\n        (B extends BladeE01 ? BladeScalar : {})\r\n    ) : {})\r\n\r\nexport const geometricProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): GeometricProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    const scalar_1 = a.e0 !== undefined && b.e0 !== undefined\r\n    const scalar_2 = a.e1 !== undefined && b.e1 !== undefined\r\n    const scalar_3 = a.e01 !== undefined && b.e01 !== undefined\r\n    if (scalar_0 || scalar_1 || scalar_2 || scalar_3) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n        if (scalar_1) resultScalar += 1.0 * (a.e0! * b.e0!)\r\n        if (scalar_2) resultScalar += 1.0 * (a.e1! * b.e1!)\r\n        if (scalar_3) resultScalar += -1.0 * (a.e01! * b.e01!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    const e0_2 = a.e1 !== undefined && b.e01 !== undefined\r\n    const e0_3 = a.e01 !== undefined && b.e1 !== undefined\r\n    if (e0_0 || e0_1 || e0_2 || e0_3) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n        if (e0_2) resultE0 += -1.0 * (a.e1! * b.e01!)\r\n        if (e0_3) resultE0 += 1.0 * (a.e01! * b.e1!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e0 !== undefined && b.e01 !== undefined\r\n    const e1_2 = a.e1 !== undefined && b.scalar !== undefined\r\n    const e1_3 = a.e01 !== undefined && b.e0 !== undefined\r\n    if (e1_0 || e1_1 || e1_2 || e1_3) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e0! * b.e01!)\r\n        if (e1_2) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n        if (e1_3) resultE1 += -1.0 * (a.e01! * b.e0!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e0 !== undefined && b.e1 !== undefined\r\n    const e01_2 = a.e1 !== undefined && b.e0 !== undefined\r\n    const e01_3 = a.e01 !== undefined && b.scalar !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e0! * b.e1!)\r\n        if (e01_2) resultE01 += -1.0 * (a.e1! * b.e0!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e01: resultE01,\r\n    }\r\n    return result as GeometricProductResultType<A, B>\r\n}\r\n\r\nexport type InnerProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE0 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE1 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE1 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE0 ? BladeE1 : {}) &\r\n        (B extends BladeE1 ? BladeE0 : {}) &\r\n        (B extends BladeE01 ? BladeScalar : {})\r\n    ) : {})\r\n\r\nexport const innerProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): InnerProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    const scalar_1 = a.e0 !== undefined && b.e0 !== undefined\r\n    const scalar_2 = a.e1 !== undefined && b.e1 !== undefined\r\n    const scalar_3 = a.e01 !== undefined && b.e01 !== undefined\r\n    if (scalar_0 || scalar_1 || scalar_2 || scalar_3) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n        if (scalar_1) resultScalar += 1.0 * (a.e0! * b.e0!)\r\n        if (scalar_2) resultScalar += 1.0 * (a.e1! * b.e1!)\r\n        if (scalar_3) resultScalar += -1.0 * (a.e01! * b.e01!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    const e0_2 = a.e1 !== undefined && b.e01 !== undefined\r\n    const e0_3 = a.e01 !== undefined && b.e1 !== undefined\r\n    if (e0_0 || e0_1 || e0_2 || e0_3) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n        if (e0_2) resultE0 += -1.0 * (a.e1! * b.e01!)\r\n        if (e0_3) resultE0 += 1.0 * (a.e01! * b.e1!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e0 !== undefined && b.e01 !== undefined\r\n    const e1_2 = a.e1 !== undefined && b.scalar !== undefined\r\n    const e1_3 = a.e01 !== undefined && b.e0 !== undefined\r\n    if (e1_0 || e1_1 || e1_2 || e1_3) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e0! * b.e01!)\r\n        if (e1_2) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n        if (e1_3) resultE1 += -1.0 * (a.e01! * b.e0!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e01 !== undefined && b.scalar !== undefined\r\n    if (e01_0 || e01_1) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e01: resultE01,\r\n    }\r\n    return result as InnerProductResultType<A, B>\r\n}\r\n\r\nexport type ExteriorProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE0 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {})\r\n    ) : {})\r\n\r\nexport const exteriorProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): ExteriorProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    if (scalar_0) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    if (e0_0 || e0_1) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e1 !== undefined && b.scalar !== undefined\r\n    if (e1_0 || e1_1) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e0 !== undefined && b.e1 !== undefined\r\n    const e01_2 = a.e1 !== undefined && b.e0 !== undefined\r\n    const e01_3 = a.e01 !== undefined && b.scalar !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e0! * b.e1!)\r\n        if (e01_2) resultE01 += -1.0 * (a.e1! * b.e0!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e01: resultE01,\r\n    }\r\n    return result as ExteriorProductResultType<A, B>\r\n}\r\n\r\nexport const multiply = <A extends OptionalMultiVector>(a: A, b: number): A => {\r\n    const result: any = {\r\n        scalar: a.scalar !== undefined ? a.scalar * b : undefined,\r\n        e0: a.e0 !== undefined ? a.e0 * b : undefined,\r\n        e1: a.e1 !== undefined ? a.e1 * b : undefined,\r\n        e01: a.e01 !== undefined ? a.e01 * b : undefined,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const div = <A extends OptionalMultiVector>(a: A, b: number): A => {\r\n    const result: any = {\r\n        scalar: a.scalar !== undefined ? a.scalar / b : undefined,\r\n        e0: a.e0 !== undefined ? a.e0 / b : undefined,\r\n        e1: a.e1 !== undefined ? a.e1 / b : undefined,\r\n        e01: a.e01 !== undefined ? a.e01 / b : undefined,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const reversion = <A extends OptionalMultiVector>(a: A): A => {\r\n    const result: any = {\r\n        scalar: a.scalar && a.scalar,\r\n        e0: a.e0 && a.e0,\r\n        e1: a.e1 && a.e1,\r\n        e01: a.e01 && -a.e01,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const repr = <A extends OptionalMultiVector>(a: A, digits: number = 3): string => {\r\n    let result = \"\"\r\n    if (a.scalar !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.scalar.toFixed(digits) + \"\"\r\n        } else {\r\n            result += a.scalar >= 0 ? \" + \" + a.scalar.toFixed(digits) + \"\" : \" - \" + Math.abs(a.scalar).toFixed(digits) + \"\"\r\n        }\r\n    }\r\n    if (a.e0 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e0.toFixed(digits) + \"e0\"\r\n        } else {\r\n            result += a.e0 >= 0 ? \" + \" + a.e0.toFixed(digits) + \"e0\" : \" - \" + Math.abs(a.e0).toFixed(digits) + \"e0\"\r\n        }\r\n    }\r\n    if (a.e1 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e1.toFixed(digits) + \"e1\"\r\n        } else {\r\n            result += a.e1 >= 0 ? \" + \" + a.e1.toFixed(digits) + \"e1\" : \" - \" + Math.abs(a.e1).toFixed(digits) + \"e1\"\r\n        }\r\n    }\r\n    if (a.e01 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e01.toFixed(digits) + \"e01\"\r\n        } else {\r\n            result += a.e01 >= 0 ? \" + \" + a.e01.toFixed(digits) + \"e01\" : \" - \" + Math.abs(a.e01).toFixed(digits) + \"e01\"\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nexport const regressiveProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    dual(exteriorProduct(dual(a), dual(b)))\r\n\r\nexport const sandwichProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    geometricProduct(b, geometricProduct(a, reversion(b)))\r\n\r\nexport const commutatorProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    multiply(sub(geometricProduct(a, b), geometricProduct(b, a)), 0.5)\r\n\r\nexport const exponential = <A extends OptionalMultiVector>(a: A) => {\r\n    const gp = geometricProduct(a, a) as any\r\n    const s = gp.scalar || 0\r\n\r\n    // TODO: Check if non-scalar parts are non-zero\r\n\r\n    if (s < 0) {\r\n        const rootS = Math.sign(s) * Math.sqrt(Math.abs(s))\r\n        return add({ scalar: Math.cos(rootS) }, multiply(a, Math.sin(rootS) / rootS))\r\n    } else if (s > 0) {\r\n        const rootS = Math.sign(s) * Math.sqrt(Math.abs(s))\r\n        return add({ scalar: Math.cosh(rootS) }, multiply(a, Math.sinh(rootS) / rootS))\r\n    } else {\r\n        return add({ scalar: 1 }, a)\r\n    }\r\n}","export type BladeScalar = { scalar: number }\r\nexport type BladeE0 = { e0: number }\r\nexport type BladeE1 = { e1: number }\r\nexport type BladeE2 = { e2: number }\r\nexport type BladeE01 = { e01: number }\r\nexport type BladeE02 = { e02: number }\r\nexport type BladeE12 = { e12: number }\r\nexport type BladeE012 = { e012: number }\r\n\r\nexport type Scalar = BladeScalar\r\nexport type Vector = BladeE0 & BladeE1 & BladeE2\r\nexport type BiVector = BladeE01 & BladeE02 & BladeE12\r\nexport type TriVector = BladeE012\r\nexport type PseudoTriVector = BladeScalar\r\nexport type PseudoBiVector = BladeE0 & BladeE1 & BladeE2\r\nexport type PseudoVector = BladeE01 & BladeE02 & BladeE12\r\nexport type PseudoScalar = BladeE012\r\nexport type Even = BladeScalar & BladeE01 & BladeE02 & BladeE12\r\nexport type Odd = BladeE0 & BladeE1 & BladeE2 & BladeE012\r\nexport type MultiVector = BladeScalar & BladeE0 & BladeE1 & BladeE2 & BladeE01 & BladeE02 & BladeE12 & BladeE012\r\n\r\nexport type OptionalMultiVector = {\r\n    scalar?: number\r\n    e0?: number\r\n    e1?: number\r\n    e2?: number\r\n    e01?: number\r\n    e02?: number\r\n    e12?: number\r\n    e012?: number\r\n}\r\n\r\nexport type AddResultType<A, B> = (\r\n    (A extends BladeScalar ? BladeScalar : {}) &\r\n    (B extends BladeScalar ? BladeScalar : {}) &\r\n    (A extends BladeE0 ? BladeE0 : {}) &\r\n    (B extends BladeE0 ? BladeE0 : {}) &\r\n    (A extends BladeE1 ? BladeE1 : {}) &\r\n    (B extends BladeE1 ? BladeE1 : {}) &\r\n    (A extends BladeE2 ? BladeE2 : {}) &\r\n    (B extends BladeE2 ? BladeE2 : {}) &\r\n    (A extends BladeE01 ? BladeE01 : {}) &\r\n    (B extends BladeE01 ? BladeE01 : {}) &\r\n    (A extends BladeE02 ? BladeE02 : {}) &\r\n    (B extends BladeE02 ? BladeE02 : {}) &\r\n    (A extends BladeE12 ? BladeE12 : {}) &\r\n    (B extends BladeE12 ? BladeE12 : {}) &\r\n    (A extends BladeE012 ? BladeE012 : {}) &\r\n    (B extends BladeE012 ? BladeE012 : {})\r\n)\r\n\r\nexport const add = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): AddResultType<A, B> => {\r\n    const result: any = {\r\n        scalar: (a.scalar !== undefined || b.scalar !== undefined) ? (a.scalar || 0) + (b.scalar || 0) : undefined,\r\n        e0: (a.e0 !== undefined || b.e0 !== undefined) ? (a.e0 || 0) + (b.e0 || 0) : undefined,\r\n        e1: (a.e1 !== undefined || b.e1 !== undefined) ? (a.e1 || 0) + (b.e1 || 0) : undefined,\r\n        e2: (a.e2 !== undefined || b.e2 !== undefined) ? (a.e2 || 0) + (b.e2 || 0) : undefined,\r\n        e01: (a.e01 !== undefined || b.e01 !== undefined) ? (a.e01 || 0) + (b.e01 || 0) : undefined,\r\n        e02: (a.e02 !== undefined || b.e02 !== undefined) ? (a.e02 || 0) + (b.e02 || 0) : undefined,\r\n        e12: (a.e12 !== undefined || b.e12 !== undefined) ? (a.e12 || 0) + (b.e12 || 0) : undefined,\r\n        e012: (a.e012 !== undefined || b.e012 !== undefined) ? (a.e012 || 0) + (b.e012 || 0) : undefined,\r\n    }\r\n    return result as AddResultType<A, B>\r\n}\r\n\r\nexport const sub = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): AddResultType<A, B> => {\r\n    const result: any = {\r\n        scalar: (a.scalar !== undefined || b.scalar !== undefined) ? (a.scalar || 0) - (b.scalar || 0) : undefined,\r\n        e0: (a.e0 !== undefined || b.e0 !== undefined) ? (a.e0 || 0) - (b.e0 || 0) : undefined,\r\n        e1: (a.e1 !== undefined || b.e1 !== undefined) ? (a.e1 || 0) - (b.e1 || 0) : undefined,\r\n        e2: (a.e2 !== undefined || b.e2 !== undefined) ? (a.e2 || 0) - (b.e2 || 0) : undefined,\r\n        e01: (a.e01 !== undefined || b.e01 !== undefined) ? (a.e01 || 0) - (b.e01 || 0) : undefined,\r\n        e02: (a.e02 !== undefined || b.e02 !== undefined) ? (a.e02 || 0) - (b.e02 || 0) : undefined,\r\n        e12: (a.e12 !== undefined || b.e12 !== undefined) ? (a.e12 || 0) - (b.e12 || 0) : undefined,\r\n        e012: (a.e012 !== undefined || b.e012 !== undefined) ? (a.e012 || 0) - (b.e012 || 0) : undefined,\r\n    }\r\n    return result as AddResultType<A, B>\r\n}\r\n\r\nexport type DualResultType<A> = (\r\n    (A extends BladeScalar ? BladeE012 : {}) &\r\n    (A extends BladeE0 ? BladeE12 : {}) &\r\n    (A extends BladeE1 ? BladeE02 : {}) &\r\n    (A extends BladeE2 ? BladeE01 : {}) &\r\n    (A extends BladeE01 ? BladeE2 : {}) &\r\n    (A extends BladeE02 ? BladeE1 : {}) &\r\n    (A extends BladeE12 ? BladeE0 : {}) &\r\n    (A extends BladeE012 ? BladeScalar : {})\r\n)\r\n\r\nexport const dual = <A extends OptionalMultiVector>(a: A): DualResultType<A> => {\r\n    const result: any = {\r\n        scalar: a.e012 !== undefined ? 1.0 * a.e012 : undefined,\r\n        e0: a.e12 !== undefined ? 1.0 * a.e12 : undefined,\r\n        e1: a.e02 !== undefined ? -1.0 * a.e02 : undefined,\r\n        e2: a.e01 !== undefined ? 1.0 * a.e01 : undefined,\r\n        e01: a.e2 !== undefined ? 1.0 * a.e2 : undefined,\r\n        e02: a.e1 !== undefined ? -1.0 * a.e1 : undefined,\r\n        e12: a.e0 !== undefined ? 1.0 * a.e0 : undefined,\r\n        e012: a.scalar !== undefined ? 1.0 * a.scalar : undefined,\r\n    }\r\n    return result as DualResultType<A>\r\n}\r\n\r\nexport type GeometricProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE2 ? BladeE2 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {}) &\r\n        (B extends BladeE02 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE12 : {}) &\r\n        (B extends BladeE012 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE0 ? BladeScalar : {}) &\r\n        (B extends BladeE1 ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE02 : {}) &\r\n        (B extends BladeE01 ? BladeE1 : {}) &\r\n        (B extends BladeE02 ? BladeE2 : {}) &\r\n        (B extends BladeE12 ? BladeE012 : {}) &\r\n        (B extends BladeE012 ? BladeE12 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE0 ? BladeE01 : {}) &\r\n        (B extends BladeE1 ? BladeScalar : {}) &\r\n        (B extends BladeE2 ? BladeE12 : {}) &\r\n        (B extends BladeE01 ? BladeE0 : {}) &\r\n        (B extends BladeE02 ? BladeE012 : {}) &\r\n        (B extends BladeE12 ? BladeE2 : {}) &\r\n        (B extends BladeE012 ? BladeE02 : {})\r\n    ) : {}) &\r\n    (A extends BladeE2 ? (\r\n        (B extends BladeScalar ? BladeE2 : {}) &\r\n        (B extends BladeE0 ? BladeE02 : {}) &\r\n        (B extends BladeE1 ? BladeE12 : {}) &\r\n        (B extends BladeE2 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE012 : {}) &\r\n        (B extends BladeE02 ? BladeE0 : {}) &\r\n        (B extends BladeE12 ? BladeE1 : {}) &\r\n        (B extends BladeE012 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE0 ? BladeE1 : {}) &\r\n        (B extends BladeE1 ? BladeE0 : {}) &\r\n        (B extends BladeE2 ? BladeE012 : {}) &\r\n        (B extends BladeE01 ? BladeScalar : {}) &\r\n        (B extends BladeE02 ? BladeE12 : {}) &\r\n        (B extends BladeE12 ? BladeE02 : {}) &\r\n        (B extends BladeE012 ? BladeE2 : {})\r\n    ) : {}) &\r\n    (A extends BladeE02 ? (\r\n        (B extends BladeScalar ? BladeE02 : {}) &\r\n        (B extends BladeE0 ? BladeE2 : {}) &\r\n        (B extends BladeE1 ? BladeE012 : {}) &\r\n        (B extends BladeE2 ? BladeE0 : {}) &\r\n        (B extends BladeE01 ? BladeE12 : {}) &\r\n        (B extends BladeE02 ? BladeScalar : {}) &\r\n        (B extends BladeE12 ? BladeE01 : {}) &\r\n        (B extends BladeE012 ? BladeE1 : {})\r\n    ) : {}) &\r\n    (A extends BladeE12 ? (\r\n        (B extends BladeScalar ? BladeE12 : {}) &\r\n        (B extends BladeE0 ? BladeE012 : {}) &\r\n        (B extends BladeE1 ? BladeE2 : {}) &\r\n        (B extends BladeE2 ? BladeE1 : {}) &\r\n        (B extends BladeE01 ? BladeE02 : {}) &\r\n        (B extends BladeE02 ? BladeE01 : {}) &\r\n        (B extends BladeE12 ? BladeScalar : {}) &\r\n        (B extends BladeE012 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE012 ? (\r\n        (B extends BladeScalar ? BladeE012 : {}) &\r\n        (B extends BladeE0 ? BladeE12 : {}) &\r\n        (B extends BladeE1 ? BladeE02 : {}) &\r\n        (B extends BladeE2 ? BladeE01 : {}) &\r\n        (B extends BladeE01 ? BladeE2 : {}) &\r\n        (B extends BladeE02 ? BladeE1 : {}) &\r\n        (B extends BladeE12 ? BladeE0 : {}) &\r\n        (B extends BladeE012 ? BladeScalar : {})\r\n    ) : {})\r\n\r\nexport const geometricProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): GeometricProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    const scalar_1 = a.e0 !== undefined && b.e0 !== undefined\r\n    const scalar_2 = a.e1 !== undefined && b.e1 !== undefined\r\n    const scalar_3 = a.e2 !== undefined && b.e2 !== undefined\r\n    const scalar_4 = a.e01 !== undefined && b.e01 !== undefined\r\n    const scalar_5 = a.e02 !== undefined && b.e02 !== undefined\r\n    const scalar_6 = a.e12 !== undefined && b.e12 !== undefined\r\n    const scalar_7 = a.e012 !== undefined && b.e012 !== undefined\r\n    if (scalar_0 || scalar_1 || scalar_2 || scalar_3 || scalar_4 || scalar_5 || scalar_6 || scalar_7) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n        if (scalar_1) resultScalar += 1.0 * (a.e0! * b.e0!)\r\n        if (scalar_2) resultScalar += 1.0 * (a.e1! * b.e1!)\r\n        if (scalar_3) resultScalar += 1.0 * (a.e2! * b.e2!)\r\n        if (scalar_4) resultScalar += -1.0 * (a.e01! * b.e01!)\r\n        if (scalar_5) resultScalar += -1.0 * (a.e02! * b.e02!)\r\n        if (scalar_6) resultScalar += -1.0 * (a.e12! * b.e12!)\r\n        if (scalar_7) resultScalar += -1.0 * (a.e012! * b.e012!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    const e0_2 = a.e1 !== undefined && b.e01 !== undefined\r\n    const e0_3 = a.e2 !== undefined && b.e02 !== undefined\r\n    const e0_4 = a.e01 !== undefined && b.e1 !== undefined\r\n    const e0_5 = a.e02 !== undefined && b.e2 !== undefined\r\n    const e0_6 = a.e12 !== undefined && b.e012 !== undefined\r\n    const e0_7 = a.e012 !== undefined && b.e12 !== undefined\r\n    if (e0_0 || e0_1 || e0_2 || e0_3 || e0_4 || e0_5 || e0_6 || e0_7) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n        if (e0_2) resultE0 += -1.0 * (a.e1! * b.e01!)\r\n        if (e0_3) resultE0 += -1.0 * (a.e2! * b.e02!)\r\n        if (e0_4) resultE0 += 1.0 * (a.e01! * b.e1!)\r\n        if (e0_5) resultE0 += 1.0 * (a.e02! * b.e2!)\r\n        if (e0_6) resultE0 += -1.0 * (a.e12! * b.e012!)\r\n        if (e0_7) resultE0 += -1.0 * (a.e012! * b.e12!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e0 !== undefined && b.e01 !== undefined\r\n    const e1_2 = a.e1 !== undefined && b.scalar !== undefined\r\n    const e1_3 = a.e2 !== undefined && b.e12 !== undefined\r\n    const e1_4 = a.e01 !== undefined && b.e0 !== undefined\r\n    const e1_5 = a.e02 !== undefined && b.e012 !== undefined\r\n    const e1_6 = a.e12 !== undefined && b.e2 !== undefined\r\n    const e1_7 = a.e012 !== undefined && b.e02 !== undefined\r\n    if (e1_0 || e1_1 || e1_2 || e1_3 || e1_4 || e1_5 || e1_6 || e1_7) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e0! * b.e01!)\r\n        if (e1_2) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n        if (e1_3) resultE1 += -1.0 * (a.e2! * b.e12!)\r\n        if (e1_4) resultE1 += -1.0 * (a.e01! * b.e0!)\r\n        if (e1_5) resultE1 += 1.0 * (a.e02! * b.e012!)\r\n        if (e1_6) resultE1 += 1.0 * (a.e12! * b.e2!)\r\n        if (e1_7) resultE1 += 1.0 * (a.e012! * b.e02!)\r\n    }\r\n    let resultE2 = undefined\r\n    const e2_0 = a.scalar !== undefined && b.e2 !== undefined\r\n    const e2_1 = a.e0 !== undefined && b.e02 !== undefined\r\n    const e2_2 = a.e1 !== undefined && b.e12 !== undefined\r\n    const e2_3 = a.e2 !== undefined && b.scalar !== undefined\r\n    const e2_4 = a.e01 !== undefined && b.e012 !== undefined\r\n    const e2_5 = a.e02 !== undefined && b.e0 !== undefined\r\n    const e2_6 = a.e12 !== undefined && b.e1 !== undefined\r\n    const e2_7 = a.e012 !== undefined && b.e01 !== undefined\r\n    if (e2_0 || e2_1 || e2_2 || e2_3 || e2_4 || e2_5 || e2_6 || e2_7) {\r\n        resultE2 = 0\r\n        if (e2_0) resultE2 += 1.0 * (a.scalar! * b.e2!)\r\n        if (e2_1) resultE2 += 1.0 * (a.e0! * b.e02!)\r\n        if (e2_2) resultE2 += 1.0 * (a.e1! * b.e12!)\r\n        if (e2_3) resultE2 += 1.0 * (a.e2! * b.scalar!)\r\n        if (e2_4) resultE2 += -1.0 * (a.e01! * b.e012!)\r\n        if (e2_5) resultE2 += -1.0 * (a.e02! * b.e0!)\r\n        if (e2_6) resultE2 += -1.0 * (a.e12! * b.e1!)\r\n        if (e2_7) resultE2 += -1.0 * (a.e012! * b.e01!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e0 !== undefined && b.e1 !== undefined\r\n    const e01_2 = a.e1 !== undefined && b.e0 !== undefined\r\n    const e01_3 = a.e2 !== undefined && b.e012 !== undefined\r\n    const e01_4 = a.e01 !== undefined && b.scalar !== undefined\r\n    const e01_5 = a.e02 !== undefined && b.e12 !== undefined\r\n    const e01_6 = a.e12 !== undefined && b.e02 !== undefined\r\n    const e01_7 = a.e012 !== undefined && b.e2 !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3 || e01_4 || e01_5 || e01_6 || e01_7) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e0! * b.e1!)\r\n        if (e01_2) resultE01 += -1.0 * (a.e1! * b.e0!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e2! * b.e012!)\r\n        if (e01_4) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n        if (e01_5) resultE01 += -1.0 * (a.e02! * b.e12!)\r\n        if (e01_6) resultE01 += 1.0 * (a.e12! * b.e02!)\r\n        if (e01_7) resultE01 += 1.0 * (a.e012! * b.e2!)\r\n    }\r\n    let resultE02 = undefined\r\n    const e02_0 = a.scalar !== undefined && b.e02 !== undefined\r\n    const e02_1 = a.e0 !== undefined && b.e2 !== undefined\r\n    const e02_2 = a.e1 !== undefined && b.e012 !== undefined\r\n    const e02_3 = a.e2 !== undefined && b.e0 !== undefined\r\n    const e02_4 = a.e01 !== undefined && b.e12 !== undefined\r\n    const e02_5 = a.e02 !== undefined && b.scalar !== undefined\r\n    const e02_6 = a.e12 !== undefined && b.e01 !== undefined\r\n    const e02_7 = a.e012 !== undefined && b.e1 !== undefined\r\n    if (e02_0 || e02_1 || e02_2 || e02_3 || e02_4 || e02_5 || e02_6 || e02_7) {\r\n        resultE02 = 0\r\n        if (e02_0) resultE02 += 1.0 * (a.scalar! * b.e02!)\r\n        if (e02_1) resultE02 += 1.0 * (a.e0! * b.e2!)\r\n        if (e02_2) resultE02 += -1.0 * (a.e1! * b.e012!)\r\n        if (e02_3) resultE02 += -1.0 * (a.e2! * b.e0!)\r\n        if (e02_4) resultE02 += 1.0 * (a.e01! * b.e12!)\r\n        if (e02_5) resultE02 += 1.0 * (a.e02! * b.scalar!)\r\n        if (e02_6) resultE02 += -1.0 * (a.e12! * b.e01!)\r\n        if (e02_7) resultE02 += -1.0 * (a.e012! * b.e1!)\r\n    }\r\n    let resultE12 = undefined\r\n    const e12_0 = a.scalar !== undefined && b.e12 !== undefined\r\n    const e12_1 = a.e0 !== undefined && b.e012 !== undefined\r\n    const e12_2 = a.e1 !== undefined && b.e2 !== undefined\r\n    const e12_3 = a.e2 !== undefined && b.e1 !== undefined\r\n    const e12_4 = a.e01 !== undefined && b.e02 !== undefined\r\n    const e12_5 = a.e02 !== undefined && b.e01 !== undefined\r\n    const e12_6 = a.e12 !== undefined && b.scalar !== undefined\r\n    const e12_7 = a.e012 !== undefined && b.e0 !== undefined\r\n    if (e12_0 || e12_1 || e12_2 || e12_3 || e12_4 || e12_5 || e12_6 || e12_7) {\r\n        resultE12 = 0\r\n        if (e12_0) resultE12 += 1.0 * (a.scalar! * b.e12!)\r\n        if (e12_1) resultE12 += 1.0 * (a.e0! * b.e012!)\r\n        if (e12_2) resultE12 += 1.0 * (a.e1! * b.e2!)\r\n        if (e12_3) resultE12 += -1.0 * (a.e2! * b.e1!)\r\n        if (e12_4) resultE12 += -1.0 * (a.e01! * b.e02!)\r\n        if (e12_5) resultE12 += 1.0 * (a.e02! * b.e01!)\r\n        if (e12_6) resultE12 += 1.0 * (a.e12! * b.scalar!)\r\n        if (e12_7) resultE12 += 1.0 * (a.e012! * b.e0!)\r\n    }\r\n    let resultE012 = undefined\r\n    const e012_0 = a.scalar !== undefined && b.e012 !== undefined\r\n    const e012_1 = a.e0 !== undefined && b.e12 !== undefined\r\n    const e012_2 = a.e1 !== undefined && b.e02 !== undefined\r\n    const e012_3 = a.e2 !== undefined && b.e01 !== undefined\r\n    const e012_4 = a.e01 !== undefined && b.e2 !== undefined\r\n    const e012_5 = a.e02 !== undefined && b.e1 !== undefined\r\n    const e012_6 = a.e12 !== undefined && b.e0 !== undefined\r\n    const e012_7 = a.e012 !== undefined && b.scalar !== undefined\r\n    if (e012_0 || e012_1 || e012_2 || e012_3 || e012_4 || e012_5 || e012_6 || e012_7) {\r\n        resultE012 = 0\r\n        if (e012_0) resultE012 += 1.0 * (a.scalar! * b.e012!)\r\n        if (e012_1) resultE012 += 1.0 * (a.e0! * b.e12!)\r\n        if (e012_2) resultE012 += -1.0 * (a.e1! * b.e02!)\r\n        if (e012_3) resultE012 += 1.0 * (a.e2! * b.e01!)\r\n        if (e012_4) resultE012 += 1.0 * (a.e01! * b.e2!)\r\n        if (e012_5) resultE012 += -1.0 * (a.e02! * b.e1!)\r\n        if (e012_6) resultE012 += 1.0 * (a.e12! * b.e0!)\r\n        if (e012_7) resultE012 += 1.0 * (a.e012! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e2: resultE2,\r\n        e01: resultE01,\r\n        e02: resultE02,\r\n        e12: resultE12,\r\n        e012: resultE012,\r\n    }\r\n    return result as GeometricProductResultType<A, B>\r\n}\r\n\r\nexport type InnerProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE2 ? BladeE2 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {}) &\r\n        (B extends BladeE02 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE12 : {}) &\r\n        (B extends BladeE012 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE0 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE1 : {}) &\r\n        (B extends BladeE02 ? BladeE2 : {}) &\r\n        (B extends BladeE012 ? BladeE12 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE1 ? BladeScalar : {}) &\r\n        (B extends BladeE01 ? BladeE0 : {}) &\r\n        (B extends BladeE12 ? BladeE2 : {}) &\r\n        (B extends BladeE012 ? BladeE02 : {})\r\n    ) : {}) &\r\n    (A extends BladeE2 ? (\r\n        (B extends BladeScalar ? BladeE2 : {}) &\r\n        (B extends BladeE2 ? BladeScalar : {}) &\r\n        (B extends BladeE02 ? BladeE0 : {}) &\r\n        (B extends BladeE12 ? BladeE1 : {}) &\r\n        (B extends BladeE012 ? BladeE01 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE0 ? BladeE1 : {}) &\r\n        (B extends BladeE1 ? BladeE0 : {}) &\r\n        (B extends BladeE01 ? BladeScalar : {}) &\r\n        (B extends BladeE012 ? BladeE2 : {})\r\n    ) : {}) &\r\n    (A extends BladeE02 ? (\r\n        (B extends BladeScalar ? BladeE02 : {}) &\r\n        (B extends BladeE0 ? BladeE2 : {}) &\r\n        (B extends BladeE2 ? BladeE0 : {}) &\r\n        (B extends BladeE02 ? BladeScalar : {}) &\r\n        (B extends BladeE012 ? BladeE1 : {})\r\n    ) : {}) &\r\n    (A extends BladeE12 ? (\r\n        (B extends BladeScalar ? BladeE12 : {}) &\r\n        (B extends BladeE1 ? BladeE2 : {}) &\r\n        (B extends BladeE2 ? BladeE1 : {}) &\r\n        (B extends BladeE12 ? BladeScalar : {}) &\r\n        (B extends BladeE012 ? BladeE0 : {})\r\n    ) : {}) &\r\n    (A extends BladeE012 ? (\r\n        (B extends BladeScalar ? BladeE012 : {}) &\r\n        (B extends BladeE0 ? BladeE12 : {}) &\r\n        (B extends BladeE1 ? BladeE02 : {}) &\r\n        (B extends BladeE2 ? BladeE01 : {}) &\r\n        (B extends BladeE01 ? BladeE2 : {}) &\r\n        (B extends BladeE02 ? BladeE1 : {}) &\r\n        (B extends BladeE12 ? BladeE0 : {}) &\r\n        (B extends BladeE012 ? BladeScalar : {})\r\n    ) : {})\r\n\r\nexport const innerProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): InnerProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    const scalar_1 = a.e0 !== undefined && b.e0 !== undefined\r\n    const scalar_2 = a.e1 !== undefined && b.e1 !== undefined\r\n    const scalar_3 = a.e2 !== undefined && b.e2 !== undefined\r\n    const scalar_4 = a.e01 !== undefined && b.e01 !== undefined\r\n    const scalar_5 = a.e02 !== undefined && b.e02 !== undefined\r\n    const scalar_6 = a.e12 !== undefined && b.e12 !== undefined\r\n    const scalar_7 = a.e012 !== undefined && b.e012 !== undefined\r\n    if (scalar_0 || scalar_1 || scalar_2 || scalar_3 || scalar_4 || scalar_5 || scalar_6 || scalar_7) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n        if (scalar_1) resultScalar += 1.0 * (a.e0! * b.e0!)\r\n        if (scalar_2) resultScalar += 1.0 * (a.e1! * b.e1!)\r\n        if (scalar_3) resultScalar += 1.0 * (a.e2! * b.e2!)\r\n        if (scalar_4) resultScalar += -1.0 * (a.e01! * b.e01!)\r\n        if (scalar_5) resultScalar += -1.0 * (a.e02! * b.e02!)\r\n        if (scalar_6) resultScalar += -1.0 * (a.e12! * b.e12!)\r\n        if (scalar_7) resultScalar += -1.0 * (a.e012! * b.e012!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    const e0_2 = a.e1 !== undefined && b.e01 !== undefined\r\n    const e0_3 = a.e2 !== undefined && b.e02 !== undefined\r\n    const e0_4 = a.e01 !== undefined && b.e1 !== undefined\r\n    const e0_5 = a.e02 !== undefined && b.e2 !== undefined\r\n    const e0_6 = a.e12 !== undefined && b.e012 !== undefined\r\n    const e0_7 = a.e012 !== undefined && b.e12 !== undefined\r\n    if (e0_0 || e0_1 || e0_2 || e0_3 || e0_4 || e0_5 || e0_6 || e0_7) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n        if (e0_2) resultE0 += -1.0 * (a.e1! * b.e01!)\r\n        if (e0_3) resultE0 += -1.0 * (a.e2! * b.e02!)\r\n        if (e0_4) resultE0 += 1.0 * (a.e01! * b.e1!)\r\n        if (e0_5) resultE0 += 1.0 * (a.e02! * b.e2!)\r\n        if (e0_6) resultE0 += -1.0 * (a.e12! * b.e012!)\r\n        if (e0_7) resultE0 += -1.0 * (a.e012! * b.e12!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e0 !== undefined && b.e01 !== undefined\r\n    const e1_2 = a.e1 !== undefined && b.scalar !== undefined\r\n    const e1_3 = a.e2 !== undefined && b.e12 !== undefined\r\n    const e1_4 = a.e01 !== undefined && b.e0 !== undefined\r\n    const e1_5 = a.e02 !== undefined && b.e012 !== undefined\r\n    const e1_6 = a.e12 !== undefined && b.e2 !== undefined\r\n    const e1_7 = a.e012 !== undefined && b.e02 !== undefined\r\n    if (e1_0 || e1_1 || e1_2 || e1_3 || e1_4 || e1_5 || e1_6 || e1_7) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e0! * b.e01!)\r\n        if (e1_2) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n        if (e1_3) resultE1 += -1.0 * (a.e2! * b.e12!)\r\n        if (e1_4) resultE1 += -1.0 * (a.e01! * b.e0!)\r\n        if (e1_5) resultE1 += 1.0 * (a.e02! * b.e012!)\r\n        if (e1_6) resultE1 += 1.0 * (a.e12! * b.e2!)\r\n        if (e1_7) resultE1 += 1.0 * (a.e012! * b.e02!)\r\n    }\r\n    let resultE2 = undefined\r\n    const e2_0 = a.scalar !== undefined && b.e2 !== undefined\r\n    const e2_1 = a.e0 !== undefined && b.e02 !== undefined\r\n    const e2_2 = a.e1 !== undefined && b.e12 !== undefined\r\n    const e2_3 = a.e2 !== undefined && b.scalar !== undefined\r\n    const e2_4 = a.e01 !== undefined && b.e012 !== undefined\r\n    const e2_5 = a.e02 !== undefined && b.e0 !== undefined\r\n    const e2_6 = a.e12 !== undefined && b.e1 !== undefined\r\n    const e2_7 = a.e012 !== undefined && b.e01 !== undefined\r\n    if (e2_0 || e2_1 || e2_2 || e2_3 || e2_4 || e2_5 || e2_6 || e2_7) {\r\n        resultE2 = 0\r\n        if (e2_0) resultE2 += 1.0 * (a.scalar! * b.e2!)\r\n        if (e2_1) resultE2 += 1.0 * (a.e0! * b.e02!)\r\n        if (e2_2) resultE2 += 1.0 * (a.e1! * b.e12!)\r\n        if (e2_3) resultE2 += 1.0 * (a.e2! * b.scalar!)\r\n        if (e2_4) resultE2 += -1.0 * (a.e01! * b.e012!)\r\n        if (e2_5) resultE2 += -1.0 * (a.e02! * b.e0!)\r\n        if (e2_6) resultE2 += -1.0 * (a.e12! * b.e1!)\r\n        if (e2_7) resultE2 += -1.0 * (a.e012! * b.e01!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e2 !== undefined && b.e012 !== undefined\r\n    const e01_2 = a.e01 !== undefined && b.scalar !== undefined\r\n    const e01_3 = a.e012 !== undefined && b.e2 !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e2! * b.e012!)\r\n        if (e01_2) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e012! * b.e2!)\r\n    }\r\n    let resultE02 = undefined\r\n    const e02_0 = a.scalar !== undefined && b.e02 !== undefined\r\n    const e02_1 = a.e1 !== undefined && b.e012 !== undefined\r\n    const e02_2 = a.e02 !== undefined && b.scalar !== undefined\r\n    const e02_3 = a.e012 !== undefined && b.e1 !== undefined\r\n    if (e02_0 || e02_1 || e02_2 || e02_3) {\r\n        resultE02 = 0\r\n        if (e02_0) resultE02 += 1.0 * (a.scalar! * b.e02!)\r\n        if (e02_1) resultE02 += -1.0 * (a.e1! * b.e012!)\r\n        if (e02_2) resultE02 += 1.0 * (a.e02! * b.scalar!)\r\n        if (e02_3) resultE02 += -1.0 * (a.e012! * b.e1!)\r\n    }\r\n    let resultE12 = undefined\r\n    const e12_0 = a.scalar !== undefined && b.e12 !== undefined\r\n    const e12_1 = a.e0 !== undefined && b.e012 !== undefined\r\n    const e12_2 = a.e12 !== undefined && b.scalar !== undefined\r\n    const e12_3 = a.e012 !== undefined && b.e0 !== undefined\r\n    if (e12_0 || e12_1 || e12_2 || e12_3) {\r\n        resultE12 = 0\r\n        if (e12_0) resultE12 += 1.0 * (a.scalar! * b.e12!)\r\n        if (e12_1) resultE12 += 1.0 * (a.e0! * b.e012!)\r\n        if (e12_2) resultE12 += 1.0 * (a.e12! * b.scalar!)\r\n        if (e12_3) resultE12 += 1.0 * (a.e012! * b.e0!)\r\n    }\r\n    let resultE012 = undefined\r\n    const e012_0 = a.scalar !== undefined && b.e012 !== undefined\r\n    const e012_1 = a.e012 !== undefined && b.scalar !== undefined\r\n    if (e012_0 || e012_1) {\r\n        resultE012 = 0\r\n        if (e012_0) resultE012 += 1.0 * (a.scalar! * b.e012!)\r\n        if (e012_1) resultE012 += 1.0 * (a.e012! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e2: resultE2,\r\n        e01: resultE01,\r\n        e02: resultE02,\r\n        e12: resultE12,\r\n        e012: resultE012,\r\n    }\r\n    return result as InnerProductResultType<A, B>\r\n}\r\n\r\nexport type ExteriorProductResultType<A, B> =\r\n    (A extends BladeScalar ? (\r\n        (B extends BladeScalar ? BladeScalar : {}) &\r\n        (B extends BladeE0 ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE1 : {}) &\r\n        (B extends BladeE2 ? BladeE2 : {}) &\r\n        (B extends BladeE01 ? BladeE01 : {}) &\r\n        (B extends BladeE02 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE12 : {}) &\r\n        (B extends BladeE012 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE0 ? (\r\n        (B extends BladeScalar ? BladeE0 : {}) &\r\n        (B extends BladeE1 ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE02 : {}) &\r\n        (B extends BladeE12 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE1 ? (\r\n        (B extends BladeScalar ? BladeE1 : {}) &\r\n        (B extends BladeE0 ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE12 : {}) &\r\n        (B extends BladeE02 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE2 ? (\r\n        (B extends BladeScalar ? BladeE2 : {}) &\r\n        (B extends BladeE0 ? BladeE02 : {}) &\r\n        (B extends BladeE1 ? BladeE12 : {}) &\r\n        (B extends BladeE01 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE01 ? (\r\n        (B extends BladeScalar ? BladeE01 : {}) &\r\n        (B extends BladeE2 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE02 ? (\r\n        (B extends BladeScalar ? BladeE02 : {}) &\r\n        (B extends BladeE1 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE12 ? (\r\n        (B extends BladeScalar ? BladeE12 : {}) &\r\n        (B extends BladeE0 ? BladeE012 : {})\r\n    ) : {}) &\r\n    (A extends BladeE012 ? (\r\n        (B extends BladeScalar ? BladeE012 : {})\r\n    ) : {})\r\n\r\nexport const exteriorProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B): ExteriorProductResultType<A, B> => {\r\n    let resultScalar = undefined\r\n    const scalar_0 = a.scalar !== undefined && b.scalar !== undefined\r\n    if (scalar_0) {\r\n        resultScalar = 0\r\n        if (scalar_0) resultScalar += 1.0 * (a.scalar! * b.scalar!)\r\n    }\r\n    let resultE0 = undefined\r\n    const e0_0 = a.scalar !== undefined && b.e0 !== undefined\r\n    const e0_1 = a.e0 !== undefined && b.scalar !== undefined\r\n    if (e0_0 || e0_1) {\r\n        resultE0 = 0\r\n        if (e0_0) resultE0 += 1.0 * (a.scalar! * b.e0!)\r\n        if (e0_1) resultE0 += 1.0 * (a.e0! * b.scalar!)\r\n    }\r\n    let resultE1 = undefined\r\n    const e1_0 = a.scalar !== undefined && b.e1 !== undefined\r\n    const e1_1 = a.e1 !== undefined && b.scalar !== undefined\r\n    if (e1_0 || e1_1) {\r\n        resultE1 = 0\r\n        if (e1_0) resultE1 += 1.0 * (a.scalar! * b.e1!)\r\n        if (e1_1) resultE1 += 1.0 * (a.e1! * b.scalar!)\r\n    }\r\n    let resultE2 = undefined\r\n    const e2_0 = a.scalar !== undefined && b.e2 !== undefined\r\n    const e2_1 = a.e2 !== undefined && b.scalar !== undefined\r\n    if (e2_0 || e2_1) {\r\n        resultE2 = 0\r\n        if (e2_0) resultE2 += 1.0 * (a.scalar! * b.e2!)\r\n        if (e2_1) resultE2 += 1.0 * (a.e2! * b.scalar!)\r\n    }\r\n    let resultE01 = undefined\r\n    const e01_0 = a.scalar !== undefined && b.e01 !== undefined\r\n    const e01_1 = a.e0 !== undefined && b.e1 !== undefined\r\n    const e01_2 = a.e1 !== undefined && b.e0 !== undefined\r\n    const e01_3 = a.e01 !== undefined && b.scalar !== undefined\r\n    if (e01_0 || e01_1 || e01_2 || e01_3) {\r\n        resultE01 = 0\r\n        if (e01_0) resultE01 += 1.0 * (a.scalar! * b.e01!)\r\n        if (e01_1) resultE01 += 1.0 * (a.e0! * b.e1!)\r\n        if (e01_2) resultE01 += -1.0 * (a.e1! * b.e0!)\r\n        if (e01_3) resultE01 += 1.0 * (a.e01! * b.scalar!)\r\n    }\r\n    let resultE02 = undefined\r\n    const e02_0 = a.scalar !== undefined && b.e02 !== undefined\r\n    const e02_1 = a.e0 !== undefined && b.e2 !== undefined\r\n    const e02_2 = a.e2 !== undefined && b.e0 !== undefined\r\n    const e02_3 = a.e02 !== undefined && b.scalar !== undefined\r\n    if (e02_0 || e02_1 || e02_2 || e02_3) {\r\n        resultE02 = 0\r\n        if (e02_0) resultE02 += 1.0 * (a.scalar! * b.e02!)\r\n        if (e02_1) resultE02 += 1.0 * (a.e0! * b.e2!)\r\n        if (e02_2) resultE02 += -1.0 * (a.e2! * b.e0!)\r\n        if (e02_3) resultE02 += 1.0 * (a.e02! * b.scalar!)\r\n    }\r\n    let resultE12 = undefined\r\n    const e12_0 = a.scalar !== undefined && b.e12 !== undefined\r\n    const e12_1 = a.e1 !== undefined && b.e2 !== undefined\r\n    const e12_2 = a.e2 !== undefined && b.e1 !== undefined\r\n    const e12_3 = a.e12 !== undefined && b.scalar !== undefined\r\n    if (e12_0 || e12_1 || e12_2 || e12_3) {\r\n        resultE12 = 0\r\n        if (e12_0) resultE12 += 1.0 * (a.scalar! * b.e12!)\r\n        if (e12_1) resultE12 += 1.0 * (a.e1! * b.e2!)\r\n        if (e12_2) resultE12 += -1.0 * (a.e2! * b.e1!)\r\n        if (e12_3) resultE12 += 1.0 * (a.e12! * b.scalar!)\r\n    }\r\n    let resultE012 = undefined\r\n    const e012_0 = a.scalar !== undefined && b.e012 !== undefined\r\n    const e012_1 = a.e0 !== undefined && b.e12 !== undefined\r\n    const e012_2 = a.e1 !== undefined && b.e02 !== undefined\r\n    const e012_3 = a.e2 !== undefined && b.e01 !== undefined\r\n    const e012_4 = a.e01 !== undefined && b.e2 !== undefined\r\n    const e012_5 = a.e02 !== undefined && b.e1 !== undefined\r\n    const e012_6 = a.e12 !== undefined && b.e0 !== undefined\r\n    const e012_7 = a.e012 !== undefined && b.scalar !== undefined\r\n    if (e012_0 || e012_1 || e012_2 || e012_3 || e012_4 || e012_5 || e012_6 || e012_7) {\r\n        resultE012 = 0\r\n        if (e012_0) resultE012 += 1.0 * (a.scalar! * b.e012!)\r\n        if (e012_1) resultE012 += 1.0 * (a.e0! * b.e12!)\r\n        if (e012_2) resultE012 += -1.0 * (a.e1! * b.e02!)\r\n        if (e012_3) resultE012 += 1.0 * (a.e2! * b.e01!)\r\n        if (e012_4) resultE012 += 1.0 * (a.e01! * b.e2!)\r\n        if (e012_5) resultE012 += -1.0 * (a.e02! * b.e1!)\r\n        if (e012_6) resultE012 += 1.0 * (a.e12! * b.e0!)\r\n        if (e012_7) resultE012 += 1.0 * (a.e012! * b.scalar!)\r\n    }\r\n    const result: any = {\r\n        scalar: resultScalar,\r\n        e0: resultE0,\r\n        e1: resultE1,\r\n        e2: resultE2,\r\n        e01: resultE01,\r\n        e02: resultE02,\r\n        e12: resultE12,\r\n        e012: resultE012,\r\n    }\r\n    return result as ExteriorProductResultType<A, B>\r\n}\r\n\r\nexport const multiply = <A extends OptionalMultiVector>(a: A, b: number): A => {\r\n    const result: any = {\r\n        scalar: a.scalar !== undefined ? a.scalar * b : undefined,\r\n        e0: a.e0 !== undefined ? a.e0 * b : undefined,\r\n        e1: a.e1 !== undefined ? a.e1 * b : undefined,\r\n        e2: a.e2 !== undefined ? a.e2 * b : undefined,\r\n        e01: a.e01 !== undefined ? a.e01 * b : undefined,\r\n        e02: a.e02 !== undefined ? a.e02 * b : undefined,\r\n        e12: a.e12 !== undefined ? a.e12 * b : undefined,\r\n        e012: a.e012 !== undefined ? a.e012 * b : undefined,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const div = <A extends OptionalMultiVector>(a: A, b: number): A => {\r\n    const result: any = {\r\n        scalar: a.scalar !== undefined ? a.scalar / b : undefined,\r\n        e0: a.e0 !== undefined ? a.e0 / b : undefined,\r\n        e1: a.e1 !== undefined ? a.e1 / b : undefined,\r\n        e2: a.e2 !== undefined ? a.e2 / b : undefined,\r\n        e01: a.e01 !== undefined ? a.e01 / b : undefined,\r\n        e02: a.e02 !== undefined ? a.e02 / b : undefined,\r\n        e12: a.e12 !== undefined ? a.e12 / b : undefined,\r\n        e012: a.e012 !== undefined ? a.e012 / b : undefined,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const reversion = <A extends OptionalMultiVector>(a: A): A => {\r\n    const result: any = {\r\n        scalar: a.scalar && a.scalar,\r\n        e0: a.e0 && a.e0,\r\n        e1: a.e1 && a.e1,\r\n        e2: a.e2 && a.e2,\r\n        e01: a.e01 && -a.e01,\r\n        e02: a.e02 && -a.e02,\r\n        e12: a.e12 && -a.e12,\r\n        e012: a.e012 && -a.e012,\r\n    }\r\n    return result as A\r\n}\r\n\r\nexport const repr = <A extends OptionalMultiVector>(a: A, digits: number = 3): string => {\r\n    let result = \"\"\r\n    if (a.scalar !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.scalar.toFixed(digits) + \"\"\r\n        } else {\r\n            result += a.scalar >= 0 ? \" + \" + a.scalar.toFixed(digits) + \"\" : \" - \" + Math.abs(a.scalar).toFixed(digits) + \"\"\r\n        }\r\n    }\r\n    if (a.e0 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e0.toFixed(digits) + \"e0\"\r\n        } else {\r\n            result += a.e0 >= 0 ? \" + \" + a.e0.toFixed(digits) + \"e0\" : \" - \" + Math.abs(a.e0).toFixed(digits) + \"e0\"\r\n        }\r\n    }\r\n    if (a.e1 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e1.toFixed(digits) + \"e1\"\r\n        } else {\r\n            result += a.e1 >= 0 ? \" + \" + a.e1.toFixed(digits) + \"e1\" : \" - \" + Math.abs(a.e1).toFixed(digits) + \"e1\"\r\n        }\r\n    }\r\n    if (a.e2 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e2.toFixed(digits) + \"e2\"\r\n        } else {\r\n            result += a.e2 >= 0 ? \" + \" + a.e2.toFixed(digits) + \"e2\" : \" - \" + Math.abs(a.e2).toFixed(digits) + \"e2\"\r\n        }\r\n    }\r\n    if (a.e01 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e01.toFixed(digits) + \"e01\"\r\n        } else {\r\n            result += a.e01 >= 0 ? \" + \" + a.e01.toFixed(digits) + \"e01\" : \" - \" + Math.abs(a.e01).toFixed(digits) + \"e01\"\r\n        }\r\n    }\r\n    if (a.e02 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e02.toFixed(digits) + \"e02\"\r\n        } else {\r\n            result += a.e02 >= 0 ? \" + \" + a.e02.toFixed(digits) + \"e02\" : \" - \" + Math.abs(a.e02).toFixed(digits) + \"e02\"\r\n        }\r\n    }\r\n    if (a.e12 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e12.toFixed(digits) + \"e12\"\r\n        } else {\r\n            result += a.e12 >= 0 ? \" + \" + a.e12.toFixed(digits) + \"e12\" : \" - \" + Math.abs(a.e12).toFixed(digits) + \"e12\"\r\n        }\r\n    }\r\n    if (a.e012 !== undefined) {\r\n        if (result === \"\") {\r\n            result += a.e012.toFixed(digits) + \"e012\"\r\n        } else {\r\n            result += a.e012 >= 0 ? \" + \" + a.e012.toFixed(digits) + \"e012\" : \" - \" + Math.abs(a.e012).toFixed(digits) + \"e012\"\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nexport const regressiveProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    dual(exteriorProduct(dual(a), dual(b)))\r\n\r\nexport const sandwichProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    geometricProduct(b, geometricProduct(a, reversion(b)))\r\n\r\nexport const commutatorProduct = <A extends OptionalMultiVector, B extends OptionalMultiVector>(a: A, b: B) =>\r\n    multiply(sub(geometricProduct(a, b), geometricProduct(b, a)), 0.5)\r\n\r\nexport const exponential = <A extends OptionalMultiVector>(a: A) => {\r\n    const gp = geometricProduct(a, a) as any\r\n    const s = gp.scalar || 0\r\n\r\n    // TODO: Check if non-scalar parts are non-zero\r\n\r\n    if (s < 0) {\r\n        const rootS = Math.sign(s) * Math.sqrt(Math.abs(s))\r\n        return add({ scalar: Math.cos(rootS) }, multiply(a, Math.sin(rootS) / rootS))\r\n    } else if (s > 0) {\r\n        const rootS = Math.sign(s) * Math.sqrt(Math.abs(s))\r\n        return add({ scalar: Math.cosh(rootS) }, multiply(a, Math.sinh(rootS) / rootS))\r\n    } else {\r\n        return add({ scalar: 1 }, a)\r\n    }\r\n}","import React from \"react\"\r\n\r\nexport function PGAGeometryTutorial() {\r\n    return (\r\n        <div>\r\n            <h4>Projective Geometric Algebra Geometry</h4>\r\n        </div>\r\n    )\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\"\nimport { hydrate, render } from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\n\nfunction getApp() {\n    return (\n        <React.StrictMode>\n            <App />\n        </React.StrictMode>\n    )\n}\n\nconst rootElement = document.getElementById(\"root\")\nif (rootElement) {\n    if (rootElement.hasChildNodes()) {\n        hydrate(getApp(), rootElement)\n    } else {\n        render(getApp(), rootElement)\n    }\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA \nserviceWorker.unregister()\n"],"sourceRoot":""}